jQuery(document).ready(function(t){var e;e=function(t){var e={animation:"fade",animationDuration:350,content:null,contentAsHTML:!1,contentCloning:!1,debug:!0,delay:300,delayTouch:[300,500],functionInit:null,functionBefore:null,functionReady:null,functionAfter:null,functionFormat:null,IEmin:6,interactive:!1,multiple:!1,parent:null,plugins:["sideTip"],repositionOnScroll:!1,restoration:"none",selfDestruction:!0,theme:[],timer:0,trackerInterval:500,trackOrigin:!1,trackTooltip:!1,trigger:"hover",triggerClose:{click:!1,mouseleave:!1,originClick:!1,scroll:!1,tap:!1,touchleave:!1},triggerOpen:{click:!1,mouseenter:!1,tap:!1,touchstart:!1},updateAnimation:"rotate",zIndex:9999999},i="undefined"!=typeof window?window:null,o={hasTouchCapability:!(!i||!("ontouchstart"in i||i.DocumentTouch&&i.document instanceof i.DocumentTouch||i.navigator.maxTouchPoints)),hasTransitions:function(){if(!i)return!1;var t=(i.document.body||i.document.documentElement).style,e="transition",o=["Moz","Webkit","Khtml","O","ms"];if("string"==typeof t[e])return!0;e=e.charAt(0).toUpperCase()+e.substr(1);for(var n=0;n<o.length;n++)if("string"==typeof t[o[n]+e])return!0;return!1}(),IE:!1,semVer:"4.2.8",window:i},n=function(){this.__$emitterPrivate=t({}),this.__$emitterPublic=t({}),this.__instancesLatestArr=[],this.__plugins={},this._env=o};function s(t){this.$container,this.constraints=null,this.__$tooltip,this.__init(t)}function r(e,i){var o=!0;return t.each(e,function(t,n){if(void 0===i[t]||e[t]!==i[t])return o=!1,!1}),o}function a(e){var i=e.attr("id"),n=i?o.window.document.getElementById(i):null;return n?n===e[0]:t.contains(o.window.document.body,e[0])}n.prototype={__bridge:function(e,i,o){if(!i[o]){var n=function(){};n.prototype=e;var s=new n;s.__init&&s.__init(i),t.each(e,function(t,e){0!=t.indexOf("__")&&(i[t]||(i[t]=function(){return s[t].apply(s,Array.prototype.slice.apply(arguments))},i[t].bridged=s))}),i[o]=s}return this},__setWindow:function(t){return o.window=t,this},_getRuler:function(t){return new s(t)},_off:function(){return this.__$emitterPrivate.off.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_on:function(){return this.__$emitterPrivate.on.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_one:function(){return this.__$emitterPrivate.one.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_plugin:function(e){if("string"==typeof e){var i=e,o=null;return i.indexOf(".")>0?o=this.__plugins[i]:t.each(this.__plugins,function(t,e){if(e.name.substring(e.name.length-i.length-1)=="."+i)return o=e,!1}),o}if(e.name.indexOf(".")<0)throw new Error("Plugins must be namespaced");return this.__plugins[e.name]=e,e.core&&this.__bridge(e.core,this,e.name),this},_trigger:function(){var t=Array.prototype.slice.apply(arguments);return"string"==typeof t[0]&&(t[0]={type:t[0]}),this.__$emitterPrivate.trigger.apply(this.__$emitterPrivate,t),this.__$emitterPublic.trigger.apply(this.__$emitterPublic,t),this},instances:function(e){var i=[];return t(e||".tooltipstered").each(function(){var e=t(this),o=e.data("tooltipster-ns");o&&t.each(o,function(t,o){i.push(e.data(o))})}),i},instancesLatest:function(){return this.__instancesLatestArr},off:function(){return this.__$emitterPublic.off.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},on:function(){return this.__$emitterPublic.on.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},one:function(){return this.__$emitterPublic.one.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},origins:function(e){return t((e?e+" ":"")+".tooltipstered").toArray()},setDefaults:function(i){return t.extend(e,i),this},triggerHandler:function(){return this.__$emitterPublic.triggerHandler.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this}},t.tooltipster=new n,t.Tooltipster=function(e,i){this.__callbacks={close:[],open:[]},this.__closingTime,this.__Content,this.__contentBcr,this.__destroyed=!1,this.__$emitterPrivate=t({}),this.__$emitterPublic=t({}),this.__enabled=!0,this.__garbageCollector,this.__Geometry,this.__lastPosition,this.__namespace="tooltipster-"+Math.round(1e6*Math.random()),this.__options,this.__$originParents,this.__pointerIsOverOrigin=!1,this.__previousThemes=[],this.__state="closed",this.__timeouts={close:[],open:null},this.__touchEvents=[],this.__tracker=null,this._$origin,this._$tooltip,this.__init(e,i)},t.Tooltipster.prototype={__init:function(i,n){var s=this;if(s._$origin=t(i),s.__options=t.extend(!0,{},e,n),s.__optionsFormat(),!o.IE||o.IE>=s.__options.IEmin){var r=null;if(void 0===s._$origin.data("tooltipster-initialTitle")&&(void 0===(r=s._$origin.attr("title"))&&(r=null),s._$origin.data("tooltipster-initialTitle",r)),null!==s.__options.content)s.__contentSet(s.__options.content);else{var a,l=s._$origin.attr("data-tooltip-content");l&&(a=t(l)),a&&a[0]?s.__contentSet(a.first()):s.__contentSet(r)}s._$origin.removeAttr("title").addClass("tooltipstered"),s.__prepareOrigin(),s.__prepareGC(),t.each(s.__options.plugins,function(t,e){s._plug(e)}),o.hasTouchCapability&&t(o.window.document.body).on("touchmove."+s.__namespace+"-triggerOpen",function(t){s._touchRecordEvent(t)}),s._on("created",function(){s.__prepareTooltip()})._on("repositioned",function(t){s.__lastPosition=t.position})}else s.__options.disabled=!0},__contentInsert:function(){var t=this._$tooltip.find(".tooltipster-content"),e=this.__Content;return this._trigger({type:"format",content:this.__Content,format:function(t){e=t}}),this.__options.functionFormat&&(e=this.__options.functionFormat.call(this,this,{origin:this._$origin[0]},this.__Content)),"string"!=typeof e||this.__options.contentAsHTML?t.empty().append(e):t.text(e),this},__contentSet:function(e){return e instanceof t&&this.__options.contentCloning&&(e=e.clone(!0)),this.__Content=e,this._trigger({type:"updated",content:e}),this},__destroyError:function(){throw new Error("This tooltip has been destroyed and cannot execute your method call.")},__geometry:function(){var e=this._$origin,i=this._$origin.is("area");if(i){var n=this._$origin.parent().attr("name");e=t('img[usemap="#'+n+'"]')}var s=e[0].getBoundingClientRect(),r=t(o.window.document),a=t(o.window),l=e,c={available:{document:null,window:null},document:{size:{height:r.height(),width:r.width()}},window:{scroll:{left:o.window.scrollX||o.window.document.documentElement.scrollLeft,top:o.window.scrollY||o.window.document.documentElement.scrollTop},size:{height:a.height(),width:a.width()}},origin:{fixedLineage:!1,offset:{},size:{height:s.bottom-s.top,width:s.right-s.left},usemapImage:i?e[0]:null,windowOffset:{bottom:s.bottom,left:s.left,right:s.right,top:s.top}}};if(i){var d=this._$origin.attr("shape"),u=this._$origin.attr("coords");if(u&&(u=u.split(","),t.map(u,function(t,e){u[e]=parseInt(t)})),"default"!=d)switch(d){case"circle":var p=u[0],m=u[1],g=u[2],f=m-g,h=p-g;c.origin.size.height=2*g,c.origin.size.width=c.origin.size.height,c.origin.windowOffset.left+=h,c.origin.windowOffset.top+=f;break;case"rect":var _=u[0],b=u[1],v=u[2],w=u[3];c.origin.size.height=w-b,c.origin.size.width=v-_,c.origin.windowOffset.left+=_,c.origin.windowOffset.top+=b;break;case"poly":for(var y=0,x=0,k=0,C=0,T="even",$=0;$<u.length;$++){var I=u[$];"even"==T?(I>k&&(k=I,0===$&&(y=k)),I<y&&(y=I),T="odd"):(I>C&&(C=I,1==$&&(x=C)),I<x&&(x=I),T="even")}c.origin.size.height=C-x,c.origin.size.width=k-y,c.origin.windowOffset.left+=y,c.origin.windowOffset.top+=x}}for(this._trigger({type:"geometry",edit:function(t){c.origin.size.height=t.height,c.origin.windowOffset.left=t.left,c.origin.windowOffset.top=t.top,c.origin.size.width=t.width},geometry:{height:c.origin.size.height,left:c.origin.windowOffset.left,top:c.origin.windowOffset.top,width:c.origin.size.width}}),c.origin.windowOffset.right=c.origin.windowOffset.left+c.origin.size.width,c.origin.windowOffset.bottom=c.origin.windowOffset.top+c.origin.size.height,c.origin.offset.left=c.origin.windowOffset.left+c.window.scroll.left,c.origin.offset.top=c.origin.windowOffset.top+c.window.scroll.top,c.origin.offset.bottom=c.origin.offset.top+c.origin.size.height,c.origin.offset.right=c.origin.offset.left+c.origin.size.width,c.available.document={bottom:{height:c.document.size.height-c.origin.offset.bottom,width:c.document.size.width},left:{height:c.document.size.height,width:c.origin.offset.left},right:{height:c.document.size.height,width:c.document.size.width-c.origin.offset.right},top:{height:c.origin.offset.top,width:c.document.size.width}},c.available.window={bottom:{height:Math.max(c.window.size.height-Math.max(c.origin.windowOffset.bottom,0),0),width:c.window.size.width},left:{height:c.window.size.height,width:Math.max(c.origin.windowOffset.left,0)},right:{height:c.window.size.height,width:Math.max(c.window.size.width-Math.max(c.origin.windowOffset.right,0),0)},top:{height:Math.max(c.origin.windowOffset.top,0),width:c.window.size.width}};"html"!=l[0].tagName.toLowerCase();){if("fixed"==l.css("position")){c.origin.fixedLineage=!0;break}l=l.parent()}return c},__optionsFormat:function(){return"number"==typeof this.__options.animationDuration&&(this.__options.animationDuration=[this.__options.animationDuration,this.__options.animationDuration]),"number"==typeof this.__options.delay&&(this.__options.delay=[this.__options.delay,this.__options.delay]),"number"==typeof this.__options.delayTouch&&(this.__options.delayTouch=[this.__options.delayTouch,this.__options.delayTouch]),"string"==typeof this.__options.theme&&(this.__options.theme=[this.__options.theme]),null===this.__options.parent?this.__options.parent=t(o.window.document.body):"string"==typeof this.__options.parent&&(this.__options.parent=t(this.__options.parent)),"hover"==this.__options.trigger?(this.__options.triggerOpen={mouseenter:!0,touchstart:!0},this.__options.triggerClose={mouseleave:!0,originClick:!0,touchleave:!0}):"click"==this.__options.trigger&&(this.__options.triggerOpen={click:!0,tap:!0},this.__options.triggerClose={click:!0,tap:!0}),this._trigger("options"),this},__prepareGC:function(){var e=this;return e.__options.selfDestruction?e.__garbageCollector=setInterval(function(){var i=(new Date).getTime();e.__touchEvents=t.grep(e.__touchEvents,function(t,e){return i-t.time>6e4}),a(e._$origin)||e.close(function(){e.destroy()})},2e4):clearInterval(e.__garbageCollector),e},__prepareOrigin:function(){var t=this;if(t._$origin.off("."+t.__namespace+"-triggerOpen"),o.hasTouchCapability&&t._$origin.on("touchstart."+t.__namespace+"-triggerOpen touchend."+t.__namespace+"-triggerOpen touchcancel."+t.__namespace+"-triggerOpen",function(e){t._touchRecordEvent(e)}),t.__options.triggerOpen.click||t.__options.triggerOpen.tap&&o.hasTouchCapability){var e="";t.__options.triggerOpen.click&&(e+="click."+t.__namespace+"-triggerOpen "),t.__options.triggerOpen.tap&&o.hasTouchCapability&&(e+="touchend."+t.__namespace+"-triggerOpen"),t._$origin.on(e,function(e){t._touchIsMeaningfulEvent(e)&&t._open(e)})}if(t.__options.triggerOpen.mouseenter||t.__options.triggerOpen.touchstart&&o.hasTouchCapability){e="";t.__options.triggerOpen.mouseenter&&(e+="mouseenter."+t.__namespace+"-triggerOpen "),t.__options.triggerOpen.touchstart&&o.hasTouchCapability&&(e+="touchstart."+t.__namespace+"-triggerOpen"),t._$origin.on(e,function(e){!t._touchIsTouchEvent(e)&&t._touchIsEmulatedEvent(e)||(t.__pointerIsOverOrigin=!0,t._openShortly(e))})}if(t.__options.triggerClose.mouseleave||t.__options.triggerClose.touchleave&&o.hasTouchCapability){e="";t.__options.triggerClose.mouseleave&&(e+="mouseleave."+t.__namespace+"-triggerOpen "),t.__options.triggerClose.touchleave&&o.hasTouchCapability&&(e+="touchend."+t.__namespace+"-triggerOpen touchcancel."+t.__namespace+"-triggerOpen"),t._$origin.on(e,function(e){t._touchIsMeaningfulEvent(e)&&(t.__pointerIsOverOrigin=!1)})}return t},__prepareTooltip:function(){var e=this,i=e.__options.interactive?"auto":"";return e._$tooltip.attr("id",e.__namespace).css({"pointer-events":i,zIndex:e.__options.zIndex}),t.each(e.__previousThemes,function(t,i){e._$tooltip.removeClass(i)}),t.each(e.__options.theme,function(t,i){e._$tooltip.addClass(i)}),e.__previousThemes=t.merge([],e.__options.theme),e},__scrollHandler:function(e){if(this.__options.triggerClose.scroll)this._close(e);else if(a(this._$origin)&&a(this._$tooltip)){var i=null;if(e.target===o.window.document)this.__Geometry.origin.fixedLineage||this.__options.repositionOnScroll&&this.reposition(e);else{i=this.__geometry();var n=!1;if("fixed"!=this._$origin.css("position")&&this.__$originParents.each(function(e,o){var s=t(o),r=s.css("overflow-x"),a=s.css("overflow-y");if("visible"!=r||"visible"!=a){var l=o.getBoundingClientRect();if("visible"!=r&&(i.origin.windowOffset.left<l.left||i.origin.windowOffset.right>l.right))return n=!0,!1;if("visible"!=a&&(i.origin.windowOffset.top<l.top||i.origin.windowOffset.bottom>l.bottom))return n=!0,!1}if("fixed"==s.css("position"))return!1}),n)this._$tooltip.css("visibility","hidden");else if(this._$tooltip.css("visibility","visible"),this.__options.repositionOnScroll)this.reposition(e);else{var s=i.origin.offset.left-this.__Geometry.origin.offset.left,r=i.origin.offset.top-this.__Geometry.origin.offset.top;this._$tooltip.css({left:this.__lastPosition.coord.left+s,top:this.__lastPosition.coord.top+r})}}this._trigger({type:"scroll",event:e,geo:i})}return this},__stateSet:function(t){return this.__state=t,this._trigger({type:"state",state:t}),this},__timeoutsClear:function(){return clearTimeout(this.__timeouts.open),this.__timeouts.open=null,t.each(this.__timeouts.close,function(t,e){clearTimeout(e)}),this.__timeouts.close=[],this},__trackerStart:function(){var t=this,e=t._$tooltip.find(".tooltipster-content");return t.__options.trackTooltip&&(t.__contentBcr=e[0].getBoundingClientRect()),t.__tracker=setInterval(function(){if(a(t._$origin)&&a(t._$tooltip)){if(t.__options.trackOrigin){var i=t.__geometry(),o=!1;r(i.origin.size,t.__Geometry.origin.size)&&(t.__Geometry.origin.fixedLineage?r(i.origin.windowOffset,t.__Geometry.origin.windowOffset)&&(o=!0):r(i.origin.offset,t.__Geometry.origin.offset)&&(o=!0)),o||(t.__options.triggerClose.mouseleave?t._close():t.reposition())}if(t.__options.trackTooltip){var n=e[0].getBoundingClientRect();n.height===t.__contentBcr.height&&n.width===t.__contentBcr.width||(t.reposition(),t.__contentBcr=n)}}else t._close()},t.__options.trackerInterval),t},_close:function(e,i,n){var s=this,r=!0;if(s._trigger({type:"close",event:e,stop:function(){r=!1}}),r||n){i&&s.__callbacks.close.push(i),s.__callbacks.open=[],s.__timeoutsClear();var a=function(){t.each(s.__callbacks.close,function(t,i){i.call(s,s,{event:e,origin:s._$origin[0]})}),s.__callbacks.close=[]};if("closed"!=s.__state){var l=!0,c=(new Date).getTime()+s.__options.animationDuration[1];if("disappearing"==s.__state&&c>s.__closingTime&&s.__options.animationDuration[1]>0&&(l=!1),l){s.__closingTime=c,"disappearing"!=s.__state&&s.__stateSet("disappearing");var d=function(){clearInterval(s.__tracker),s._trigger({type:"closing",event:e}),s._$tooltip.off("."+s.__namespace+"-triggerClose").removeClass("tooltipster-dying"),t(o.window).off("."+s.__namespace+"-triggerClose"),s.__$originParents.each(function(e,i){t(i).off("scroll."+s.__namespace+"-triggerClose")}),s.__$originParents=null,t(o.window.document.body).off("."+s.__namespace+"-triggerClose"),s._$origin.off("."+s.__namespace+"-triggerClose"),s._off("dismissable"),s.__stateSet("closed"),s._trigger({type:"after",event:e}),s.__options.functionAfter&&s.__options.functionAfter.call(s,s,{event:e,origin:s._$origin[0]}),a()};o.hasTransitions?(s._$tooltip.css({"-moz-animation-duration":s.__options.animationDuration[1]+"ms","-ms-animation-duration":s.__options.animationDuration[1]+"ms","-o-animation-duration":s.__options.animationDuration[1]+"ms","-webkit-animation-duration":s.__options.animationDuration[1]+"ms","animation-duration":s.__options.animationDuration[1]+"ms","transition-duration":s.__options.animationDuration[1]+"ms"}),s._$tooltip.clearQueue().removeClass("tooltipster-show").addClass("tooltipster-dying"),s.__options.animationDuration[1]>0&&s._$tooltip.delay(s.__options.animationDuration[1]),s._$tooltip.queue(d)):s._$tooltip.stop().fadeOut(s.__options.animationDuration[1],d)}}else a()}return s},_off:function(){return this.__$emitterPrivate.off.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_on:function(){return this.__$emitterPrivate.on.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_one:function(){return this.__$emitterPrivate.one.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_open:function(e,i){var n=this;if(!n.__destroying&&a(n._$origin)&&n.__enabled){var s=!0;if("closed"==n.__state&&(n._trigger({type:"before",event:e,stop:function(){s=!1}}),s&&n.__options.functionBefore&&(s=n.__options.functionBefore.call(n,n,{event:e,origin:n._$origin[0]}))),!1!==s&&null!==n.__Content){i&&n.__callbacks.open.push(i),n.__callbacks.close=[],n.__timeoutsClear();var r,l=function(){"stable"!=n.__state&&n.__stateSet("stable"),t.each(n.__callbacks.open,function(t,e){e.call(n,n,{origin:n._$origin[0],tooltip:n._$tooltip[0]})}),n.__callbacks.open=[]};if("closed"!==n.__state)r=0,"disappearing"===n.__state?(n.__stateSet("appearing"),o.hasTransitions?(n._$tooltip.clearQueue().removeClass("tooltipster-dying").addClass("tooltipster-show"),n.__options.animationDuration[0]>0&&n._$tooltip.delay(n.__options.animationDuration[0]),n._$tooltip.queue(l)):n._$tooltip.stop().fadeIn(l)):"stable"==n.__state&&l();else{if(n.__stateSet("appearing"),r=n.__options.animationDuration[0],n.__contentInsert(),n.reposition(e,!0),o.hasTransitions?(n._$tooltip.addClass("tooltipster-"+n.__options.animation).addClass("tooltipster-initial").css({"-moz-animation-duration":n.__options.animationDuration[0]+"ms","-ms-animation-duration":n.__options.animationDuration[0]+"ms","-o-animation-duration":n.__options.animationDuration[0]+"ms","-webkit-animation-duration":n.__options.animationDuration[0]+"ms","animation-duration":n.__options.animationDuration[0]+"ms","transition-duration":n.__options.animationDuration[0]+"ms"}),setTimeout(function(){"closed"!=n.__state&&(n._$tooltip.addClass("tooltipster-show").removeClass("tooltipster-initial"),n.__options.animationDuration[0]>0&&n._$tooltip.delay(n.__options.animationDuration[0]),n._$tooltip.queue(l))},0)):n._$tooltip.css("display","none").fadeIn(n.__options.animationDuration[0],l),n.__trackerStart(),t(o.window).on("resize."+n.__namespace+"-triggerClose",function(e){var i=t(document.activeElement);(i.is("input")||i.is("textarea"))&&t.contains(n._$tooltip[0],i[0])||n.reposition(e)}).on("scroll."+n.__namespace+"-triggerClose",function(t){n.__scrollHandler(t)}),n.__$originParents=n._$origin.parents(),n.__$originParents.each(function(e,i){t(i).on("scroll."+n.__namespace+"-triggerClose",function(t){n.__scrollHandler(t)})}),n.__options.triggerClose.mouseleave||n.__options.triggerClose.touchleave&&o.hasTouchCapability){n._on("dismissable",function(t){t.dismissable?t.delay?(p=setTimeout(function(){n._close(t.event)},t.delay),n.__timeouts.close.push(p)):n._close(t):clearTimeout(p)});var c=n._$origin,d="",u="",p=null;n.__options.interactive&&(c=c.add(n._$tooltip)),n.__options.triggerClose.mouseleave&&(d+="mouseenter."+n.__namespace+"-triggerClose ",u+="mouseleave."+n.__namespace+"-triggerClose "),n.__options.triggerClose.touchleave&&o.hasTouchCapability&&(d+="touchstart."+n.__namespace+"-triggerClose",u+="touchend."+n.__namespace+"-triggerClose touchcancel."+n.__namespace+"-triggerClose"),c.on(u,function(t){if(n._touchIsTouchEvent(t)||!n._touchIsEmulatedEvent(t)){var e="mouseleave"==t.type?n.__options.delay:n.__options.delayTouch;n._trigger({delay:e[1],dismissable:!0,event:t,type:"dismissable"})}}).on(d,function(t){!n._touchIsTouchEvent(t)&&n._touchIsEmulatedEvent(t)||n._trigger({dismissable:!1,event:t,type:"dismissable"})})}n.__options.triggerClose.originClick&&n._$origin.on("click."+n.__namespace+"-triggerClose",function(t){n._touchIsTouchEvent(t)||n._touchIsEmulatedEvent(t)||n._close(t)}),(n.__options.triggerClose.click||n.__options.triggerClose.tap&&o.hasTouchCapability)&&setTimeout(function(){if("closed"!=n.__state){var e="",i=t(o.window.document.body);n.__options.triggerClose.click&&(e+="click."+n.__namespace+"-triggerClose "),n.__options.triggerClose.tap&&o.hasTouchCapability&&(e+="touchend."+n.__namespace+"-triggerClose"),i.on(e,function(e){n._touchIsMeaningfulEvent(e)&&(n._touchRecordEvent(e),n.__options.interactive&&t.contains(n._$tooltip[0],e.target)||n._close(e))}),n.__options.triggerClose.tap&&o.hasTouchCapability&&i.on("touchstart."+n.__namespace+"-triggerClose",function(t){n._touchRecordEvent(t)})}},0),n._trigger("ready"),n.__options.functionReady&&n.__options.functionReady.call(n,n,{origin:n._$origin[0],tooltip:n._$tooltip[0]})}if(n.__options.timer>0){p=setTimeout(function(){n._close()},n.__options.timer+r);n.__timeouts.close.push(p)}}}return n},_openShortly:function(t){var e=this,i=!0;if("stable"!=e.__state&&"appearing"!=e.__state&&!e.__timeouts.open&&(e._trigger({type:"start",event:t,stop:function(){i=!1}}),i)){var o=0==t.type.indexOf("touch")?e.__options.delayTouch:e.__options.delay;o[0]?e.__timeouts.open=setTimeout(function(){e.__timeouts.open=null,e.__pointerIsOverOrigin&&e._touchIsMeaningfulEvent(t)?(e._trigger("startend"),e._open(t)):e._trigger("startcancel")},o[0]):(e._trigger("startend"),e._open(t))}return e},_optionsExtract:function(e,i){var o=this,n=t.extend(!0,{},i),s=o.__options[e];return s||(s={},t.each(i,function(t,e){var i=o.__options[t];void 0!==i&&(s[t]=i)})),t.each(n,function(e,i){void 0!==s[e]&&("object"!=typeof i||i instanceof Array||null==i||"object"!=typeof s[e]||s[e]instanceof Array||null==s[e]?n[e]=s[e]:t.extend(n[e],s[e]))}),n},_plug:function(e){var i=t.tooltipster._plugin(e);if(!i)throw new Error('The "'+e+'" plugin is not defined');return i.instance&&t.tooltipster.__bridge(i.instance,this,i.name),this},_touchIsEmulatedEvent:function(t){for(var e=!1,i=(new Date).getTime(),o=this.__touchEvents.length-1;o>=0;o--){var n=this.__touchEvents[o];if(!(i-n.time<500))break;n.target===t.target&&(e=!0)}return e},_touchIsMeaningfulEvent:function(t){return this._touchIsTouchEvent(t)&&!this._touchSwiped(t.target)||!this._touchIsTouchEvent(t)&&!this._touchIsEmulatedEvent(t)},_touchIsTouchEvent:function(t){return 0==t.type.indexOf("touch")},_touchRecordEvent:function(t){return this._touchIsTouchEvent(t)&&(t.time=(new Date).getTime(),this.__touchEvents.push(t)),this},_touchSwiped:function(t){for(var e=!1,i=this.__touchEvents.length-1;i>=0;i--){var o=this.__touchEvents[i];if("touchmove"==o.type){e=!0;break}if("touchstart"==o.type&&t===o.target)break}return e},_trigger:function(){var e=Array.prototype.slice.apply(arguments);return"string"==typeof e[0]&&(e[0]={type:e[0]}),e[0].instance=this,e[0].origin=this._$origin?this._$origin[0]:null,e[0].tooltip=this._$tooltip?this._$tooltip[0]:null,this.__$emitterPrivate.trigger.apply(this.__$emitterPrivate,e),t.tooltipster._trigger.apply(t.tooltipster,e),this.__$emitterPublic.trigger.apply(this.__$emitterPublic,e),this},_unplug:function(e){var i=this;if(i[e]){var o=t.tooltipster._plugin(e);o.instance&&t.each(o.instance,function(t,o){i[t]&&i[t].bridged===i[e]&&delete i[t]}),i[e].__destroy&&i[e].__destroy(),delete i[e]}return i},close:function(t){return this.__destroyed?this.__destroyError():this._close(null,t),this},content:function(t){var e=this;if(void 0===t)return e.__Content;if(e.__destroyed)e.__destroyError();else if(e.__contentSet(t),null!==e.__Content){if("closed"!==e.__state&&(e.__contentInsert(),e.reposition(),e.__options.updateAnimation))if(o.hasTransitions){var i=e.__options.updateAnimation;e._$tooltip.addClass("tooltipster-update-"+i),setTimeout(function(){"closed"!=e.__state&&e._$tooltip.removeClass("tooltipster-update-"+i)},1e3)}else e._$tooltip.fadeTo(200,.5,function(){"closed"!=e.__state&&e._$tooltip.fadeTo(200,1)})}else e._close();return e},destroy:function(){var e=this;if(e.__destroyed)e.__destroyError();else{"closed"!=e.__state?e.option("animationDuration",0)._close(null,null,!0):e.__timeoutsClear(),e._trigger("destroy"),e.__destroyed=!0,e._$origin.removeData(e.__namespace).off("."+e.__namespace+"-triggerOpen"),t(o.window.document.body).off("."+e.__namespace+"-triggerOpen");var i=e._$origin.data("tooltipster-ns");if(i)if(1===i.length){var n=null;"previous"==e.__options.restoration?n=e._$origin.data("tooltipster-initialTitle"):"current"==e.__options.restoration&&(n="string"==typeof e.__Content?e.__Content:t("<div></div>").append(e.__Content).html()),n&&e._$origin.attr("title",n),e._$origin.removeClass("tooltipstered"),e._$origin.removeData("tooltipster-ns").removeData("tooltipster-initialTitle")}else i=t.grep(i,function(t,i){return t!==e.__namespace}),e._$origin.data("tooltipster-ns",i);e._trigger("destroyed"),e._off(),e.off(),e.__Content=null,e.__$emitterPrivate=null,e.__$emitterPublic=null,e.__options.parent=null,e._$origin=null,e._$tooltip=null,t.tooltipster.__instancesLatestArr=t.grep(t.tooltipster.__instancesLatestArr,function(t,i){return e!==t}),clearInterval(e.__garbageCollector)}return e},disable:function(){return this.__destroyed?(this.__destroyError(),this):(this._close(),this.__enabled=!1,this)},elementOrigin:function(){if(!this.__destroyed)return this._$origin[0];this.__destroyError()},elementTooltip:function(){return this._$tooltip?this._$tooltip[0]:null},enable:function(){return this.__enabled=!0,this},hide:function(t){return this.close(t)},instance:function(){return this},off:function(){return this.__destroyed||this.__$emitterPublic.off.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},on:function(){return this.__destroyed?this.__destroyError():this.__$emitterPublic.on.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},one:function(){return this.__destroyed?this.__destroyError():this.__$emitterPublic.one.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},open:function(t){return this.__destroyed?this.__destroyError():this._open(null,t),this},option:function(e,i){return void 0===i?this.__options[e]:(this.__destroyed?this.__destroyError():(this.__options[e]=i,this.__optionsFormat(),t.inArray(e,["trigger","triggerClose","triggerOpen"])>=0&&this.__prepareOrigin(),"selfDestruction"===e&&this.__prepareGC()),this)},reposition:function(t,e){return this.__destroyed?this.__destroyError():"closed"!=this.__state&&a(this._$origin)&&(e||a(this._$tooltip))&&(e||this._$tooltip.detach(),this.__Geometry=this.__geometry(),this._trigger({type:"reposition",event:t,helper:{geo:this.__Geometry}})),this},show:function(t){return this.open(t)},status:function(){return{destroyed:this.__destroyed,enabled:this.__enabled,open:"closed"!==this.__state,state:this.__state}},triggerHandler:function(){return this.__destroyed?this.__destroyError():this.__$emitterPublic.triggerHandler.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this}},t.fn.tooltipster=function(){var i=Array.prototype.slice.apply(arguments);if(0===this.length)return this;if("string"==typeof i[0]){var o="#*$~&";return this.each(function(){var e=t(this).data("tooltipster-ns"),n=e?t(this).data(e[0]):null;if(!n)throw new Error("You called Tooltipster's \""+i[0]+'" method on an uninitialized element');if("function"!=typeof n[i[0]])throw new Error('Unknown method "'+i[0]+'"');this.length>1&&"content"==i[0]&&(i[1]instanceof t||"object"==typeof i[1]&&null!=i[1]&&i[1].tagName)&&!n.__options.contentCloning&&n.__options.debug;var s=n[i[0]](i[1],i[2]);if(s!==n||"instance"===i[0])return o=s,!1}),"#*$~&"!==o?o:this}t.tooltipster.__instancesLatestArr=[];var n=i[0]&&void 0!==i[0].multiple,s=n&&i[0].multiple||!n&&e.multiple,r=i[0]&&void 0!==i[0].content,a=r&&i[0].content||!r&&e.content,l=i[0]&&void 0!==i[0].contentCloning,c=(l&&i[0].contentCloning,i[0]&&void 0!==i[0].debug);c&&i[0].debug;return this.length>1&&(a instanceof t||"object"==typeof a&&null!=a&&a.tagName),this.each(function(){var e=!1,o=t(this),n=o.data("tooltipster-ns"),r=null;n?s&&(e=!0):e=!0,e&&(r=new t.Tooltipster(this,i[0]),n||(n=[]),n.push(r.__namespace),o.data("tooltipster-ns",n),o.data(r.__namespace,r),r.__options.functionInit&&r.__options.functionInit.call(r,r,{origin:this}),r._trigger("init")),t.tooltipster.__instancesLatestArr.push(r)}),this},s.prototype={__init:function(e){this.__$tooltip=e,this.__$tooltip.css({left:0,overflow:"hidden",position:"absolute",top:0}).find(".tooltipster-content").css("overflow","auto"),this.$container=t('<div class="tooltipster-ruler"></div>').append(this.__$tooltip).appendTo(o.window.document.body)},__forceRedraw:function(){var t=this.__$tooltip.parent();this.__$tooltip.detach(),this.__$tooltip.appendTo(t)},constrain:function(t,e){return this.constraints={width:t,height:e},this.__$tooltip.css({display:"block",height:"",overflow:"auto",width:t}),this},destroy:function(){this.__$tooltip.detach().find(".tooltipster-content").css({display:"",overflow:""}),this.$container.remove()},free:function(){return this.constraints=null,this.__$tooltip.css({display:"",height:"",overflow:"visible",width:""}),this},measure:function(){this.__forceRedraw();var t=this.__$tooltip[0].getBoundingClientRect(),e={size:{height:t.height||t.bottom-t.top,width:t.width||t.right-t.left}};if(this.constraints){var i=this.__$tooltip.find(".tooltipster-content"),n=this.__$tooltip.outerHeight(),s=i[0].getBoundingClientRect(),r={height:n<=this.constraints.height,width:t.width<=this.constraints.width&&s.width>=i[0].scrollWidth-1};e.fits=r.height&&r.width}return o.IE&&o.IE<=11&&e.size.width!==o.window.document.documentElement.clientWidth&&(e.size.width=Math.ceil(e.size.width)+1),e}};var l=navigator.userAgent.toLowerCase();-1!=l.indexOf("msie")?o.IE=parseInt(l.split("msie")[1]):-1!==l.toLowerCase().indexOf("trident")&&-1!==l.indexOf(" rv:11")?o.IE=11:-1!=l.toLowerCase().indexOf("edge/")&&(o.IE=parseInt(l.toLowerCase().split("edge/")[1])),t.tooltipster._plugin({name:"tooltipster.sideTip",instance:{__defaults:function(){return{arrow:!0,distance:6,functionPosition:null,maxWidth:null,minIntersection:16,minWidth:0,position:null,side:"top",viewportAware:!0}},__init:function(t){var e=this;e.__instance=t,e.__namespace="tooltipster-sideTip-"+Math.round(1e6*Math.random()),e.__previousState="closed",e.__options,e.__optionsFormat(),e.__instance._on("state."+e.__namespace,function(t){"closed"==t.state?e.__close():"appearing"==t.state&&"closed"==e.__previousState&&e.__create(),e.__previousState=t.state}),e.__instance._on("options."+e.__namespace,function(){e.__optionsFormat()}),e.__instance._on("reposition."+e.__namespace,function(t){e.__reposition(t.event,t.helper)})},__close:function(){this.__instance.content()instanceof t&&this.__instance.content().detach(),this.__instance._$tooltip.remove(),this.__instance._$tooltip=null},__create:function(){var e=t('<div class="tooltipster-base tooltipster-sidetip"><div class="tooltipster-box"><div class="tooltipster-content"></div></div><div class="tooltipster-arrow"><div class="tooltipster-arrow-uncropped"><div class="tooltipster-arrow-border"></div><div class="tooltipster-arrow-background"></div></div></div></div>');this.__options.arrow||e.find(".tooltipster-box").css("margin",0).end().find(".tooltipster-arrow").hide(),this.__options.minWidth&&e.css("min-width",this.__options.minWidth+"px"),this.__options.maxWidth&&e.css("max-width",this.__options.maxWidth+"px"),this.__instance._$tooltip=e,this.__instance._trigger("created")},__destroy:function(){this.__instance._off("."+self.__namespace)},__optionsFormat:function(){if(this.__options=this.__instance._optionsExtract("tooltipster.sideTip",this.__defaults()),this.__options.position&&(this.__options.side=this.__options.position),"object"!=typeof this.__options.distance&&(this.__options.distance=[this.__options.distance]),this.__options.distance.length<4&&(void 0===this.__options.distance[1]&&(this.__options.distance[1]=this.__options.distance[0]),void 0===this.__options.distance[2]&&(this.__options.distance[2]=this.__options.distance[0]),void 0===this.__options.distance[3]&&(this.__options.distance[3]=this.__options.distance[1])),this.__options.distance={top:this.__options.distance[0],right:this.__options.distance[1],bottom:this.__options.distance[2],left:this.__options.distance[3]},"string"==typeof this.__options.side){this.__options.side=[this.__options.side,{top:"bottom",right:"left",bottom:"top",left:"right"}[this.__options.side]],"left"==this.__options.side[0]||"right"==this.__options.side[0]?this.__options.side.push("top","bottom"):this.__options.side.push("right","left")}6===t.tooltipster._env.IE&&!0!==this.__options.arrow&&(this.__options.arrow=!1)},__reposition:function(e,i){var o,n=this,s=n.__targetFind(i),r=[];n.__instance._$tooltip.detach();var a=n.__instance._$tooltip.clone(),l=t.tooltipster._getRuler(a),c=!1,d=n.__instance.option("animation");switch(d&&a.removeClass("tooltipster-"+d),t.each(["window","document"],function(o,d){var u=null;if(n.__instance._trigger({container:d,helper:i,satisfied:c,takeTest:function(t){u=t},results:r,type:"positionTest"}),1==u||0!=u&&0==c&&("window"!=d||n.__options.viewportAware))for(o=0;o<n.__options.side.length;o++){var p={horizontal:0,vertical:0},m=n.__options.side[o];"top"==m||"bottom"==m?p.vertical=n.__options.distance[m]:p.horizontal=n.__options.distance[m],n.__sideChange(a,m),t.each(["natural","constrained"],function(t,o){if(u=null,n.__instance._trigger({container:d,event:e,helper:i,mode:o,results:r,satisfied:c,side:m,takeTest:function(t){u=t},type:"positionTest"}),1==u||0!=u&&0==c){var a={container:d,distance:p,fits:null,mode:o,outerSize:null,side:m,size:null,target:s[m],whole:null},g=("natural"==o?l.free():l.constrain(i.geo.available[d][m].width-p.horizontal,i.geo.available[d][m].height-p.vertical)).measure();if(a.size=g.size,a.outerSize={height:g.size.height+p.vertical,width:g.size.width+p.horizontal},"natural"==o?i.geo.available[d][m].width>=a.outerSize.width&&i.geo.available[d][m].height>=a.outerSize.height?a.fits=!0:a.fits=!1:a.fits=g.fits,"window"==d&&(a.fits?a.whole="top"==m||"bottom"==m?i.geo.origin.windowOffset.right>=n.__options.minIntersection&&i.geo.window.size.width-i.geo.origin.windowOffset.left>=n.__options.minIntersection:i.geo.origin.windowOffset.bottom>=n.__options.minIntersection&&i.geo.window.size.height-i.geo.origin.windowOffset.top>=n.__options.minIntersection:a.whole=!1),r.push(a),a.whole)c=!0;else if("natural"==a.mode&&(a.fits||a.size.width<=i.geo.available[d][m].width))return!1}})}}),n.__instance._trigger({edit:function(t){r=t},event:e,helper:i,results:r,type:"positionTested"}),r.sort(function(t,e){return t.whole&&!e.whole?-1:!t.whole&&e.whole?1:t.whole&&e.whole?(i=n.__options.side.indexOf(t.side))<(o=n.__options.side.indexOf(e.side))?-1:i>o?1:"natural"==t.mode?-1:1:t.fits&&!e.fits?-1:!t.fits&&e.fits?1:t.fits&&e.fits?(i=n.__options.side.indexOf(t.side))<(o=n.__options.side.indexOf(e.side))?-1:i>o?1:"natural"==t.mode?-1:1:"document"==t.container&&"bottom"==t.side&&"natural"==t.mode?-1:1;var i,o}),(o=r[0]).coord={},o.side){case"left":case"right":o.coord.top=Math.floor(o.target-o.size.height/2);break;case"bottom":case"top":o.coord.left=Math.floor(o.target-o.size.width/2)}switch(o.side){case"left":o.coord.left=i.geo.origin.windowOffset.left-o.outerSize.width;break;case"right":o.coord.left=i.geo.origin.windowOffset.right+o.distance.horizontal;break;case"top":o.coord.top=i.geo.origin.windowOffset.top-o.outerSize.height;break;case"bottom":o.coord.top=i.geo.origin.windowOffset.bottom+o.distance.vertical}"window"==o.container?"top"==o.side||"bottom"==o.side?o.coord.left<0?i.geo.origin.windowOffset.right-this.__options.minIntersection>=0?o.coord.left=0:o.coord.left=i.geo.origin.windowOffset.right-this.__options.minIntersection-1:o.coord.left>i.geo.window.size.width-o.size.width&&(i.geo.origin.windowOffset.left+this.__options.minIntersection<=i.geo.window.size.width?o.coord.left=i.geo.window.size.width-o.size.width:o.coord.left=i.geo.origin.windowOffset.left+this.__options.minIntersection+1-o.size.width):o.coord.top<0?i.geo.origin.windowOffset.bottom-this.__options.minIntersection>=0?o.coord.top=0:o.coord.top=i.geo.origin.windowOffset.bottom-this.__options.minIntersection-1:o.coord.top>i.geo.window.size.height-o.size.height&&(i.geo.origin.windowOffset.top+this.__options.minIntersection<=i.geo.window.size.height?o.coord.top=i.geo.window.size.height-o.size.height:o.coord.top=i.geo.origin.windowOffset.top+this.__options.minIntersection+1-o.size.height):(o.coord.left>i.geo.window.size.width-o.size.width&&(o.coord.left=i.geo.window.size.width-o.size.width),o.coord.left<0&&(o.coord.left=0)),n.__sideChange(a,o.side),i.tooltipClone=a[0],i.tooltipParent=n.__instance.option("parent").parent[0],i.mode=o.mode,i.whole=o.whole,i.origin=n.__instance._$origin[0],i.tooltip=n.__instance._$tooltip[0],delete o.container,delete o.fits,delete o.mode,delete o.outerSize,delete o.whole,o.distance=o.distance.horizontal||o.distance.vertical;var u,p,m,g=t.extend(!0,{},o);if(n.__instance._trigger({edit:function(t){o=t},event:e,helper:i,position:g,type:"position"}),n.__options.functionPosition){var f=n.__options.functionPosition.call(n,n.__instance,i,g);f&&(o=f)}l.destroy(),"top"==o.side||"bottom"==o.side?(u={prop:"left",val:o.target-o.coord.left},p=o.size.width-this.__options.minIntersection):(u={prop:"top",val:o.target-o.coord.top},p=o.size.height-this.__options.minIntersection),u.val<this.__options.minIntersection?u.val=this.__options.minIntersection:u.val>p&&(u.val=p),m=i.geo.origin.fixedLineage?i.geo.origin.windowOffset:{left:i.geo.origin.windowOffset.left+i.geo.window.scroll.left,top:i.geo.origin.windowOffset.top+i.geo.window.scroll.top},o.coord={left:m.left+(o.coord.left-i.geo.origin.windowOffset.left),top:m.top+(o.coord.top-i.geo.origin.windowOffset.top)},n.__sideChange(n.__instance._$tooltip,o.side),i.geo.origin.fixedLineage?n.__instance._$tooltip.css("position","fixed"):n.__instance._$tooltip.css("position",""),n.__instance._$tooltip.css({left:o.coord.left,top:o.coord.top,height:o.size.height,width:o.size.width}).find(".tooltipster-arrow").css({left:"",top:""}).css(u.prop,u.val),n.__instance._$tooltip.appendTo(n.__instance.option("parent")),n.__instance._trigger({type:"repositioned",event:e,position:o})},__sideChange:function(t,e){t.removeClass("tooltipster-bottom").removeClass("tooltipster-left").removeClass("tooltipster-right").removeClass("tooltipster-top").addClass("tooltipster-"+e)},__targetFind:function(t){var e={},i=this.__instance._$origin[0].getClientRects();i.length>1&&(1==this.__instance._$origin.css("opacity")&&(this.__instance._$origin.css("opacity",.99),i=this.__instance._$origin[0].getClientRects(),this.__instance._$origin.css("opacity",1)));if(i.length<2)e.top=Math.floor(t.geo.origin.windowOffset.left+t.geo.origin.size.width/2),e.bottom=e.top,e.left=Math.floor(t.geo.origin.windowOffset.top+t.geo.origin.size.height/2),e.right=e.left;else{var o=i[0];e.top=Math.floor(o.left+(o.right-o.left)/2),o=i.length>2?i[Math.ceil(i.length/2)-1]:i[0],e.right=Math.floor(o.top+(o.bottom-o.top)/2),o=i[i.length-1],e.bottom=Math.floor(o.left+(o.right-o.left)/2),o=i.length>2?i[Math.ceil((i.length+1)/2)-1]:i[i.length-1],e.left=Math.floor(o.top+(o.bottom-o.top)/2)}return e}}})},"function"==typeof define&&define.amd?define(["jquery"],function(t){return e(t)}):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}),jQuery(document).ready(function($){var fchunker_upload={fchunker:function(t){$.extend(t),$.upId&&$.upUrl&&($.domHtml=$("#"+$.upId).html(),$.upInputId=$.upId+"_input")},fchunker_limitFileSize:function(t,e){for(var i=["KB","MB","GB"],o=e.toUpperCase(),n=0,s=0;s<i.length;s++){var r=o.indexOf(i[s]);if(r>-1){n=parseInt(o.substr(0,r))*Math.pow(1024,s+1);break}}return!(t.size>n)},upErrorMsg:function(t){$.upError=t},upStop:function(t){$.upError=t},upStatus:function(){return!$.upError||("function"==typeof $.upStop&&$.upStop($.upError),!1)},fchunker_getPercent:function(t,e){if(t=parseFloat(t),e=parseFloat(e),isNaN(t)||isNaN(e))return"-";return e<=0?0:Math.round(t/e*1e4)/100},fchunker_upload:function(t,e){$.upError="",$.tempFile=$("#"+$.upInputId)[0].files[0],"file"==t&&($.tempFile=e);var i=$.tempFile;if(!i)return!1;"function"==typeof $.upStart&&$.upStart();var o=i.name,n=o.lastIndexOf("."),s=o.length,r=o.substring(n+1,s);if($.upType&&(uptype=$.upType.split(","),-1==$.inArray(r,uptype)&&($.upError="Type error: Error-"+r)),0==$.upStatus())return!1;$.taskStart=+new Date,setTimeout("jQuery.fchunker_upload_core()","100")},fchunker_upload_core:function(){var file=$.tempFile;if(!file)return!1;$.upShardSize||($.upShardSize=2),$.upShardSize=.8*$.upShardSize;for(var filename=file.name,size=file.size,index1=filename.lastIndexOf("."),index2=filename.length,suffix=filename.substring(index1+1,index2),shardSize=1024*$.upShardSize*1024,succeed=0,shardCount=Math.ceil(size/shardSize),re=[],start,end=0,i=0;i<shardCount;++i)re[i]=[],start=i*shardSize,end=Math.min(size,start+shardSize),re[i].file_data=file.slice(start,end),re[i].file_name=filename,re[i].file_size=size;const URL=$.upUrl;var i2=0,i3=1,fcs=Array(),xhr=new XMLHttpRequest;function ajaxStack(stack){if(0!=$.upStatus()){var form=new FormData;stack[i2]&&(fcs=stack[i2],form.append("file_data",fcs.file_data),form.append("file_name",fcs.file_name),form.append("file_size",fcs.file_size),form.append("file_total",shardCount),form.append("file_index",i3),form.append("taskStart",$.taskStart),form.append("action","backup_migration"),form.append("token","bmi"),form.append("f","upload-backup"),form.append("nonce",$.bmiNonce),xhr.open("POST",URL,!0),xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),xhr.setRequestHeader("HTTP_X_REQUESTED_WITH","XMLHttpRequest"),xhr.onload=function(){ajaxStack(stack)},xhr.onreadystatechange=function(){if(0!=$.upStatus()&&4==xhr.readyState&&200==xhr.status){var data=xhr.responseText?eval("("+xhr.responseText+")"):"";++succeed;var cent=$.fchunker_getPercent(succeed,shardCount);"function"==typeof $.upEvent&&$.upEvent(cent),100==cent?setTimeout(function(){"function"==typeof $.upCallBack&&$.upCallBack(data)},500):"function"==typeof $.upCallBack&&$.upCallBack(data)}},xhr.send(form),i2++,i3++,form.delete("file_data"),form.delete("file_name"),form.delete("file_size"),form.delete("file_total"),form.delete("taskStart"),form.delete("file_index"),form.delete("action"),form.delete("token"),form.delete("nonce"),form.delete("f"))}}ajaxStack(re),re=null,file=null}};$.extend(fchunker_upload)}),jQuery(window).on("load",function(){setTimeout(function(){jQuery("#bmi").css({opacity:0}),jQuery("#bmi-preload").css({opacity:1}),jQuery("#bmi-preload").animate({opacity:0},150,function(){jQuery("#bmi-preload").remove(),jQuery("#bmi").css({display:"block"}),jQuery.bmi.dropdowns.init(),setTimeout(function(){jQuery("#bmi").animate({opacity:1},350,function(){jQuery(window).trigger("bmi-preload-collapsed")}),jQuery("#bmi_carrousel").show(200)},100)})},50)}),jQuery(document).ready(function(t){let e=!1,i=!1;function o(t){return(t=""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}t.extend({bmi:{clipboard:function(e,i=!1){try{const o=document.createElement("textarea");o.value=e,o.setAttribute("readonly",""),o.style.position="absolute",o.style.left="-9999px",document.body.appendChild(o),o.select(),document.execCommand("copy"),document.body.removeChild(o);let n=t("#bmi-success-copy").text();return 0!=i&&(n=i),t.bmi.alert("success",n,3e3),!0}catch(e){return console.log(e),t.bmi.alert("warning",t("#bmi-failed-copy").text(),3e3),!1}},alert:function(e="default",i="---",o=7e3){t(".bmi-notification-box").length<=0&&t("body").find("#bmi").prepend(t('<div class="bmi-notification-box"></div>')),e="default"==e?"":"success"==e?" is-success":"warning"==e?" is-warning":"error"==e?" is-danger":" is-info";let n=Math.floor(Math.random()*Math.floor(64e3)),s=`<div style="display: none;" id="ntf-${n}" class="bmi-notification${e}">\n          <button class="bmi-times-button" onclick="jQuery.bmi.hideAlert(this)">&times;</button>\n          <div class="bmi-cf">\n            <div class="bmi-left bmi-alert-icon"><div class="bmi-icon-bg"></div></div>\n            <div class="bmi-left bmi-alert-msg-title">\n              <div class="bmi-title${e}">Backup Migration</div>\n              <div>${i}</div>\n            </div>\n          </div>\n        </div>`;t(".bmi-notification-box").prepend(s);let r=t(`#ntf-${n}`);r.css({opacity:0,display:"block"});let a=r.outerWidth();r.outerHeight();r.css({right:"-35vw","font-size":"0px",width:0,padding:0,opacity:"0"}),r.animate({right:"15px",width:a,padding:"1rem 2rem 1rem 1.5rem",opacity:"1"},{duration:200,queue:!1}),r.animate({"font-size":"16px"},{duration:300,queue:!1}),setTimeout(()=>{t(`#ntf-${n}`).css({width:""})},250),setTimeout(()=>{r.animate({"font-size":"0px"},{duration:200,queue:!1}),r.animate({right:"-35vw",height:0,width:0,margin:0,padding:0,opacity:"0"},300,function(){r.remove()})},o)},_msg:function(e){"msg"==e.status&&(void 0===e.level&&(e.level="info"),t.bmi.alert(e.level,e.why,3e3),console.log("Backup-migration: ","["+e.level.toUpperCase()+"]",e.why))},hideAlert:function(e){let i=t(e).parents(".bmi-notification");i.animate({"font-size":"0px"},{duration:200,queue:!1}),i.animate({right:"-35vw",height:0,width:0,margin:0,padding:0,opacity:"0"},300,function(){i.remove()})},modal:function(e=!1){let i=!1;return 0!=e&&(i=document.getElementById(e)),{clearModal:function(){i.querySelectorAll(".customselect").forEach(function(t){t.classList.remove("active")}),i.querySelectorAll('input[type="text"]').forEach(function(t){t.value="",t.setAttribute("value","")})},open:function(e=function(){}){i.classList.add("before-open"),setTimeout(function(){i.classList.add("open"),t("html")[0].style.overflowY="hidden",setTimeout(e,410)},10)},close:function(e=function(){}){i.offsetWidth>0&&i.offsetHeight>0?(i.classList.add("before-close"),setTimeout(function(){i.classList.add("closed"),setTimeout(function(){i.classList.remove("before-open"),i.classList.remove("open"),i.classList.remove("before-close"),i.classList.remove("closed"),t.bmi.modal(i.id).clearModal(),e()},410)},10)):(i.classList.remove("before-open"),i.classList.remove("open"),i.classList.remove("before-close"),i.classList.remove("closed"),e()),t("html")[0].style.overflowY="auto"},closeAll:function(){document.querySelectorAll(".modal").forEach(function(e){t.bmi.modal(e.id).close()}),t("html")[0].style.overflowY="auto"}}},json:function(e){return new Promise(function(i,o){try{return i(JSON.parse(e))}catch(n){if("string"!=typeof e)return o(!1);{let n=t.bmi.reverse(e).indexOf("}");n=0==n?e.length:-n,e=e.slice(e.indexOf("{"),n);try{return i(JSON.parse(e))}catch(t){return o(!1)}}}})},reverse:function(e){return"string"==typeof e?""===e?"":t.bmi.reverse(e.substr(1))+e.charAt(0):e},logJsonError:function(e,i){data={},data.action="backup_migration",data.token="bmi",data.nonce=bmiVariables.nonce,data.f="front-end-ajax-error",data.call=i,data.error=e,t.post(ajaxurl,data).done(e=>{t.bmi.json(e).then(function(t){}).catch(function(t){console.log(t)})}).fail(t=>{console.error(t)})},ajax:function(e,i={}){return new Promise(function(o,n){function s(i){let o={};if(console.log("------- BACKUP MIGRATION ERROR START -------"),console.log("Call: ",e),o.call=e,"object"==typeof i)for(let t=0;t<i.length;++t)if("object"==typeof i[t])for(let e in i[t])"function"!=typeof i[t][e]&&("string"==typeof i[t][e]&&i[t][e].length>2e3?(o[`${t}_${e}`]=i[t][e].slice(0,2e3),console.log(t,e),console.warn(i[t][e])):(console.log(t,e,i[t][e]),o[`${t}_${e}`]=i[t][e]));else console.log(t,i[t]),o[`${t}_x`]=i[t];else console.log(i),"string"==typeof i&&i.length>2e3?o.single_error_txt=i.slice(0,2e3):o.single_error_txt=i;console.log("-------- BACKUP MIGRATION ERROR END --------\n\n"),t.bmi.logJsonError(o,e),n(i)}i.action="backup_migration",i.token="bmi",i.nonce=bmiVariables.nonce,i.f=e,t.post(ajaxurl,i).done(n=>{t.bmi.json(n).then(function(t){o(t)}).catch(function(t){s(["json",t,n,e,i,n.responseText||!1])})}).fail(t=>{s([t,e,i])})})},tooltips:{init:function(){let e={delay:200,debug:!1,delayTouch:[100,200],interactive:!1,distance:0,side:"top",contentAsHTML:!1,maxWidth:460,triggerOpen:{mouseenter:!0,touchstart:!0},triggerClose:{mouseleave:!0,click:!0,tap:!0},theme:["bmi-tooltip","bmi-tt-default","bmi-tt-default-customized"],repositionOnScroll:!0,functionReady:function(){setTimeout(()=>{let e=t.tooltipster.instances();for(instance in e)e[instance].reposition()},10)}},i=t(".tooltip"),o=t(".tooltip-html"),n=t(".premium-wrapper"),s=JSON.parse(JSON.stringify(e));s.contentAsHTML=!0,s.interactive=!0;for(let o=0;o<i.length;++o){let n=i[o],s=n.getAttribute("data-top"),r=n.getAttribute("side"),a=JSON.parse(JSON.stringify(e));a.content=n.getAttribute("tooltip"),s&&(a.distance=parseInt(s)),r&&r.trim().length>0&&(a.side=r),t(n).tooltipster(a)}for(let e=0;e<o.length;++e){let i=o[e],n=i.getAttribute("side"),r=JSON.parse(JSON.stringify(s));r.content=i.getAttribute("tooltip"),n&&n.trim().length>0&&(r.side=n),t(i).tooltipster(r)}for(let i=0;i<n.length;++i){let o=n[i],s=JSON.parse(JSON.stringify(e));s.contentAsHTML=!0,s.interactive=!0,s.maxWidth=500,o.getAttribute("tooltip")?s.content=o.getAttribute("tooltip"):o.getAttribute("data-ready")?s.content=t("#premium-tooltip-pre")[0].innerHTML.trim()+" "+o.getAttribute("data-ready").trim()+" "+t("#premium-tooltip-r")[0].innerHTML.trim():s.content=t("#premium-tooltip")[0].innerHTML,o.getAttribute("side")&&(s.side=o.getAttribute("side")),t(o).tooltipster(s)}},hideAll:function(e=!1){function i(){let e=t.tooltipster.instances();for(instance in e)e[instance].close()}e?i():setTimeout(i,10)}},collapsers:{toggle:function(i){if(!0===e)return;e=!0;let o=i.getAttribute("group");i.classList.contains("active")?t.bmi.collapsers.close(i):t.bmi.collapsers.open(i,o)},open:function(i,o){t.bmi.collapsers.closeGroup(o),t(i).addClass("active"),t(i).find(".content").show(300),setTimeout(function(){e=!1},300)},close:function(i){t(i).removeClass("active"),t(i).find(".content").hide(300),setTimeout(function(){e=!1},300)},closeGroup:function(i){t('.collapser[group="'+i+'"]').removeClass("active"),t('.collapser[group="'+i+'"]').find(".content").hide(300),setTimeout(function(){e=!1},300)},closeAll:function(){t(".collapser").removeClass("active"),t(".collapser").find(".content").hide(300),setTimeout(function(){e=!1},300)}},isUrlValid:function(t){return!!new RegExp("^(?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z0-9\\u00a1-\\uffff][a-z0-9\\u00a1-\\uffff_-]{0,62})?[a-z0-9\\u00a1-\\uffff]\\.)+(?:[a-z\\u00a1-\\uffff]{2,}\\.?))(?::\\d{2,5})?(?:[/?#]\\S*)?$","i").test(t)},bytesToHuman:function(t,e,i,o,n){return(e=Math,i=e.log,o=1024,n=i(t)/i(o)|0,t/e.pow(o,n)).toFixed(2)+" "+(n?"KMGTPEZY"[--n]+"B":"Bytes")},bytesToHumanCut:function(t,e,i,o,n){return Math.ceil((o=1024,n=(i=(e=Math).log)(t)/i(o)|0,t/e.pow(o,n)))+" "+(n?"KMGTPEZY"[--n]+"B":"Bytes")},getCurrentBackups:function(e=function(){}){t("#reloading-bm-list").length>0&&"none"==t("#reloading-bm-list")[0].style.display&&(t("#reloading-bm-list").show(),t.bmi.ajax("get-current-backups",{}).then(function(i){t.bmi.ajax("check-not-uploaded-backups").then(function(t){}),t("#reloading-bm-list").hide(),e(i)}).catch(function(t){}))},getCurrentStaging:function(e=function(){}){t("#reloading-bm-stg-list").length>0&&"none"==t("#reloading-bm-stg-list")[0].style.display&&(t("#reloading-bm-stg-list").show(),t.bmi.ajax("staging-get-updated-list",{}).then(function(i){t("#reloading-bm-stg-list").hide(),e(i)}).catch(function(t){}))},getExpirationTime:function(e){let i=t("#stg-tbody-table").data("never");if(isNaN(parseInt(e))||e==i)return e;let o=+new Date,n=1e3*e,s=n-o,r=Math.floor(s/24/60/60/1e3),a=Math.floor(s%864e5/36e5),l=Math.floor(s%36e5/6e4),c=Math.floor(s%6e4/1e3);return n<o&&(r=0,a=0,l=0,c=0),0!=r||0!=a||0!=l||2!=c&&1!=c||(clearTimeout(window.bmiRefreshExpired),window.bmiRefreshExpired=setTimeout(function(){t.bmi.reloadStaging()},3e3)),`${("0"+r).slice(-2)}:${("0"+a).slice(-2)}:${("0"+l).slice(-2)}:${("0"+c).slice(-2)}`},fillWithNewStagings:function(e,i=function(){}){let n=[],s=0,r=t("#stg-tbody-table"),a=t(".br_stg_tr_template"),l=r.data("empty"),c=r.data("local"),d=r.data("prefix"),u=r.data("never"),p=r.data("display"),m=r.data("original"),g=document.createElement("TR"),f=document.createElement("TD");f.setAttribute("colspan","100%"),f.classList.add("center"),f.innerText=l,g.append(f),r.html("");for(let i in e){if(void 0===(i=e[i]).name)continue;if(void 0===i.url)continue;if(void 0===i.db_prefix)continue;n.push(o(i.name));let l=a.clone();l.removeClass("br_stg_tr_template"),l.attr("name",o(i.name)),l.find(".stg-tr-name").text(o(i.display_name)),l.find(".stg-tr-name").attr("tooltip",`<b>${m}</b>: ${o(i.name)}<br><b>${p}</b>: ${o(i.display_name)}`),o(i.name)==o(i.display_name)&&l.find(".stg-tr-name").attr("tooltip",`<b>${p}</b>: ${o(i.display_name)}`),l.find(".stg-tr-url-el").attr("href",o(i.url)),l.find(".stg-tr-url-el").attr("tooltip",o(i.url)),l.find(".stg-tr-url-el").text(o(i.url)),l.find(".stg-tr-size").text(o(i.total_size)+" ("+o(i.total_files)+")"),l.find(".stg-tr-server").text("local"==i.communication_secret?o(c):"TasteWP"),l.find(".stg-tr-server").attr("tooltip",d+": "+o(i.db_prefix)),l.find(".stg-tr-creation").text(o(i.creation_date)),l.find(".stg-tr-expiration span").text(o(i.expiration_time)),"local"!=i.communication_secret?(l.addClass("bmi-tastewp-staging-row"),l.attr("server","tastewp"),l.attr("token",o(i.communication_secret)),isNaN(parseInt(i.expiration_time))||i.expiration_time==u?(l.attr("expiration",o(u)),l.find(".stg-tr-expiration span").text(o(u)),"1"==i.is_premium&&l.find(".stg-tr-expiration span").addClass("stg-premium-stars")):(l.attr("expiration",parseInt(i.expiration_time)),l.find(".stg-tr-expiration span").text(t.bmi.getExpirationTime(parseInt(i.expiration_time))))):(l.attr("server","local"),l.find(".stg-tr-expiration span").text(o(u))),l.hide(),l.prependTo(r),s++}if(0==s&&r.html(g),""==t("#bmi-stg-subname-input").val()){let e=1,i=bmiVariables.stgStagingDefaultName;for(let t=0;t<n.length;++t){n[t];if(!n.includes(i))break;i=bmiVariables.stgStagingDefaultName+e,e++}t("#bmi-stg-subname-input").val(i)}t.bmi.tooltips.init(),t.bmi.showStagings()},fillWithNewBackups:function(e,i,n=function(){}){let s=e.external,r=e.local,a={};for(let t in r){let e=r[t];a[e[7]]=e,a[e[7]][9]=e[8],a[e[7]][8]={local:!0}}for(let t in s)for(let e in s[t]){let i=s[t][e];void 0===a[e]?(a[e]=i,a[e][9]=i[9],void 0===a[e][8]||"object"!=typeof a[e][8]?a[e][8]={local:!1,gdrive:i[8]}:"object"==typeof a[e][8]&&(a[e][8].gdrive=i[8])):a[e][8].gdrive=i[8]}t("#bmi_restore_tbody").html(""),t(".bmi-stg-dropdown-area-inner-scroll").html(""),t(".bmi-stg-dropdown-area-selector").find(".bmi-stg-option-name").text(bmiVariables.stgLoading),t(".bmi-stg-dropdown-area-selector").find(".bmi-stg-option-date i").text("---"),t(".bmi-stg-dropdown-area-selector").find(".bmi-stg-option-size i").text("---");let l=t("#bmi-manual-locked").text().trim(),c=Object.keys(a).sort(function(t,e){return+new Date(a[t][1].replace(/\-/g,"/"))-+new Date(a[e][1].replace(/\-/g,"/"))}),d=0;for(;d<c.length;++d){let e=[],i=c[d],n=a[i][7],s=a[i][9],r="locked"===a[i][5],u=a[i][0],p=a[i][0];a[i][0].includes("#%&")&&(u=a[i][0].split("#%&")[1],p=a[i][0].split("#%&")[0]),u=(u=u.replace(/  /g,"")).trim(),p=(p=p.replace(/  /g,"")).trim();let m=!0;void 0!==a[i][8]&&"object"==typeof a[i][8]&&void 0!==a[i][8].local&&(m=a[i][8].local);let g=!1;void 0!==a[i][8]&&"object"==typeof a[i][8]&&void 0!==a[i][8].gdrive&&(g=a[i][8].gdrive);let f="<b>"+t("#bmi-backup-created-on").text().trim()+"</b>",h="<b>"+t("#bmi-backup-original-name").text().trim()+"</b>",_="<b>"+t("#bmi-backup-file-name").text().trim()+"</b>",b="bmi_br_backup_"+d,v=t(".br_tr_template").clone();v.removeClass("br_tr_template"),v[0].style.display="none",v.attr("md5",n),g&&v.attr("gdrive-id",g),!m&&g&&v.attr("data-is-local","no"),v.find(".br_label").attr("for",b),v.find(".br_checkbox").attr("id",b),v.find(".bc-download-btn").attr("href",t("#BMI_BLOG_URL").text().trim()+"/?backup-migration=BMI_BACKUP&backup-id="+u),v.find(".bc-logs-btn").attr("href",t("#BMI_BLOG_URL").text().trim()+"/?backup-migration=BMI_BACKUP_LOGS&backup-id="+u),v.find(".br_date").text(a[i][1]),v.find(".br_name").text(u),p==u?v.find(".br_name").attr("tooltip",h+" "+o(p)+"<br><br>"+f+" "+o(s)):v.find(".br_name").attr("tooltip",h+" "+o(p)+"<br><br>"+_+" "+o(u)+"<br><br>"+f+" "+o(s));let w=t.bmi.bytesToHuman(a[i][4]),y=t.bmi.bytesToHuman(a[i][4]);if((y.includes("MB")||y.includes("KB"))&&(y=t.bmi.bytesToHumanCut(a[i][4])),v.find(".br_size").text(y+" ("+a[i][2]+")"),m?(v.find(".br_stroage").find(".strg-local").addClass("img-green"),e.push("Local Storage")):(v.find(".br_stroage").find(".strg-local").addClass("img-red"),v.find(".brow_subactions").hide(),v.find(".brow_lock").hide()),g?(v.find(".br_stroage").find(".strg-gdrive").addClass("img-green"),e.push("Google Drive")):v.find(".br_stroage").find(".strg-gdrive").addClass("img-red"),m&&g?v.find(".br_stroage").find(".strg-suc").addClass("img-green"):v.find(".br_stroage").find(".strg-suc").addClass("img-orange"),v.find(".br_stroage").find(".strg-suc").attr("tooltip","Backup is stored on: "+e.join(", ")+"."),t("#bmi-pro-storage-gdrive-toggle").is(":checked")||v.find(".br_stroage").addClass("bmi-gdrive-disabled"),0!=(""+a[i][6]).trim().length&&a[i][6]+""!="false"||(v.find(".bc-locked-btn").addClass("forever"),v.find(".bc-locked-btn").attr("tooltip",l),r=!0),r?v.find(".bc-unlocked-btn").hide():v.find(".bc-locked-btn").hide(),v.prependTo("#bmi_restore_tbody"),t(".bmi-stg-drop-option.active").removeClass("active"),m){let e=t(".bmi-stg-option-template").clone();e.removeClass("bmi-stg-option-template"),e[0].style.display="",e.attr("backup-name",u),e.addClass("active"),e.find(".bmi-stg-option-name").text(u),e.find(".bmi-stg-option-date i").text(a[i][1]),e.find(".bmi-stg-option-size i").text(w),e.prependTo(".bmi-stg-dropdown-area-inner-scroll"),!m&&g?(e.attr("gdrive-id",g),e.attr("data-is-local","no")):e.attr("data-is-local","yes"),t(".bmi-stg-dropdown-area-selector").find(".bmi-stg-option-name").text(u),t(".bmi-stg-dropdown-area-selector").find(".bmi-stg-option-date i").text(a[i][1]),t(".bmi-stg-dropdown-area-selector").find(".bmi-stg-option-size i").text(w),t("#bmi-stg-current-backup-selected").val(u),0}}if("tastewp"==t(".bmi-stg-sel-box.bmi-active").attr("data-mode")?(t(".bmi-stg-creation-box-local").hide(300),t(".bmi-stg-creation-box-tastewp").hide(300),t(".bmi-stg-creation-box-tastewp-empty").hide(300),t(".bmi-stg-drop-option:not(.bmi-stg-option-template)").length>0?t(".bmi-stg-creation-box-tastewp").show(300):t(".bmi-stg-creation-box-tastewp-empty").show(300)):(t(".bmi-stg-creation-box-local").show(300),t(".bmi-stg-creation-box-tastewp").hide(300),t(".bmi-stg-creation-box-tastewp-empty").hide(300)),0==d){let e=t("#bmi_restore_tbody").data("empty");t("#bmi_restore_tbody").html('<tr class="bmi-empty-text"><td class="center text-muted" colspan="100%">'+e+"</td></tr>")}t.bmi.tooltips.init(),t.bmi.showMoreBackups(),"tastewp"==t(".bmi-stg-sel-box.bmi-active").data("mode")&&(t(".bmi-stg-creation-box-local").hide(300),t(".bmi-stg-creation-box-tastewp").hide(300),t(".bmi-stg-creation-box-tastewp-empty").hide(300),t("#bmi_restore_tbody").find("tr:not(.bmi-empty-text)").length>0?t(".bmi-stg-creation-box-tastewp").show(300):t(".bmi-stg-creation-box-tastewp-empty").show(300)),void 0!==i&&t.bmi.fillOnGoing(i),n()},showMoreBackups:function(e){backups={};let i=t("#bmi_restore_tbody").find("tr:hidden");for(let e=0;e<i.length&&e<10;++e)setTimeout(function(){t(i[e]).show(300)},50*e);i.length-10<=0?t("#load-more-backups-wrp").hide(300):t("#load-more-backups-wrp").show(300)},showStagings:function(){backups={};let e=t("#stg-tbody-table").find("tr:hidden");for(let i=0;i<e.length;++i)setTimeout(function(){t(e[i]).show(300)},50*i)},setBackupProgressList:function(e,i,o=!1){let n=t("#bmi_restore_tbody").find('tr[md5="'+e+'"]').find(".strg-suc"),s=t("#bmi_restore_tbody").find('tr[md5="'+e+'"]').find(".strg-warn"),r=t("#bmi_restore_tbody").find('tr[md5="'+e+'"]').find(".strg-ong"),a=t("#bmi_restore_tbody").find('tr[md5="'+e+'"]').find(".strg-wait");n.hide(),s.hide(),r.hide(),a.hide(),"suc"==i&&(n.show(),o&&n.tooltipster("content",o)),"warn"==i&&(s.show(),o&&s.tooltipster("content",o)),"ong"==i&&(r.show(),o&&r.tooltipster("content",o)),"wait"==i&&(a.show(),o&&a.tooltipster("content",o))},fillOnGoing:function(e=!1){if(e&&void 0!==e.queue&&void 0!==e.current_upload){for(let i in e.queue){let o=e.queue[i].md5;t.bmi.setBackupProgressList(o,"wait")}if("object"==typeof e.current_upload)if(0==e.current_upload.length){if(i){let e=i;t.bmi.setBackupProgressList(e,"suc","Backup is stored on: Local Storage & Google Drive"),t("#bmi_restore_tbody").find('tr[md5="'+e+'"]').find(".strg-gdrive").addClass("img-green"),t("#bmi_restore_tbody").find('tr[md5="'+e+'"]').find(".strg-suc").addClass("img-green"),t("#bmi_restore_tbody").find('tr[md5="'+e+'"]').find(".strg-gdrive").removeClass("img-red"),t("#bmi_restore_tbody").find('tr[md5="'+e+'"]').find(".strg-suc").removeClass("img-orange"),i=!1}}else{if(i||(i=e.current_upload.md5),i&&i!=e.current_upload.md5){let o=i;t.bmi.setBackupProgressList(o,"suc","Backup is stored on: Local Storage & Google Drive"),t("#bmi_restore_tbody").find('tr[md5="'+o+'"]').find(".strg-gdrive").addClass("img-green"),t("#bmi_restore_tbody").find('tr[md5="'+o+'"]').find(".strg-suc").addClass("img-green"),t("#bmi_restore_tbody").find('tr[md5="'+o+'"]').find(".strg-gdrive").removeClass("img-red"),t("#bmi_restore_tbody").find('tr[md5="'+o+'"]').find(".strg-suc").removeClass("img-orange"),i=e.current_upload.md5}let o="0%";void 0!==e.current_upload.progress&&(o=e.current_upload.progress),t.bmi.setBackupProgressList(i,"ong",`Upload to Google Drive in progress: ${o} `)}}if(void 0!==e.failed)for(let i in e.failed){let o=!1;void 0!==e.queue[i]&&(o=e.queue[i].md5),void 0!==e.current_upload.task&&e.current_upload.task==i&&(o=e.current_upload.md5),o&&(t("#bmi_restore_tbody").find('tr[md5="'+o+'"]').find(".strg-gdrive").removeClass("img-green"),t("#bmi_restore_tbody").find('tr[md5="'+o+'"]').find(".strg-gdrive").addClass("img-red"),t.bmi.setBackupProgressList(o,"warn"))}},reloadBackups:function(e=function(){}){t.bmi.getCurrentBackups(function(i){t.bmi.fillWithNewBackups(i.backups,i.backups.ongoing,function(){e(),t("#backups-select-all").prop("checked",!1),t(".del-all-btn-wrp").hide(300)})})},reloadStaging:function(e=function(){}){t.bmi.getCurrentStaging(function(i){t.bmi.fillWithNewStagings(i.sites,function(){e()})})},hideAllLists:function(){let e=t(".dropdown-open");if(!(e.length<=0))for(let i=0;i<e.length;++i){let o=t(e[i]);o.hasClass("ignored-open")?o.removeClass("ignored-open"):(o.hide(300),o.removeClass("dropdown-open"),t(o[0].closest(".bmi-dropdown")).removeClass("active"))}},setOption:function(e,i=null,o=!1){let n=e.find(".dropdown-options");e.attr("data-optioner")&&(n=t(".optioner-"+e.attr("data-optioner"))),n.find(".active-option").removeClass("active-option"),!1!==o&&(i=n.find('.dropdown-option[data-value="'+o+'"]')),t(i).hasClass("active-option")||(e.find(".dropdown-title").text(i.text()),e.attr("data-selected",i.data("value")),i.addClass("active-option"),!1===o&&e.change(),t.bmi.hideAllLists())},prepareFile:function(e,i){let o=document.createElement("a");o.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(i)),o.setAttribute("download",e),o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o),t.bmi.alert("success",t("#bmi-download-should-start").text(),3e3)}}})}),jQuery(document).ready(function(t){t(".collapser .header").on("click",function(e){e.preventDefault();let i=t(this).parent(".collapser")[0];t.bmi.collapsers.toggle(i)}),t(".bmi_will_collapse").on("change",function(e){e.preventDefault();let i=!1;"radio"==this.getAttribute("type")&&"false"==this.getAttribute("value")&&(i=!0),$child=t(this).data("if-checked"),!0!==this.checked||i?t("#"+$child).hide(300):t("#"+$child).show(300)}),t(".collapser-openner").on("click",function(e){e.preventDefault();let i="configuration",o=t(this).data("el");t(this).data("group")&&(i=t(this).data("group")),t.bmi.collapsers.open(o,i),setTimeout(function(){t([document.documentElement,document.body]).animate({scrollTop:t(o).offset().top-50+"px"},300)},300)}),function(){let e=t(".bmi_will_collapse");for(let i=0;i<e.length;++i){let o=!1;$trigger=e[i],$child=t($trigger).data("if-checked"),"radio"==$trigger.getAttribute("type")&&"false"==$trigger.getAttribute("value")&&(o=!0),!0===$trigger.checked?t("#"+$child).show():t("#"+$child).hide()}}()}),jQuery(document).ready(function(t){var e=!0,i=!1;t.bmi.crons=function(){function o(){!function(e,i){t.bmi.ajax("calculate-cron",e).then(function(e){"success"==e.status?i(e):(i(!1),t.bmi._msg(e))}).catch(function(t){i(!1),console.log(t)})}({type:t('[data-id="cron-period"]').attr("data-selected"),day:t('[data-id="cron-day"]').attr("data-selected"),week:t('[data-id="cron-week"]').attr("data-selected"),hour:t('[data-id="cron-hour"]').attr("data-selected"),minute:t('[data-id="cron-minute"]').attr("data-selected"),keep:t('[data-id="cron-keep-backups"]').attr("data-selected"),enabled:!0==!t("#cron-btn-toggle")[0].checked},function(i){"success"===i.status&&!1!==i?(t(".cron-time-server").tooltipster("option","interactive",!1),t(".cron-time-server").tooltipster("option","contentAsHTML",!0),!0===t("#cron-btn-toggle")[0].checked&&(i.data="---"),t(".cron-time-server").tooltipster("content","<b>"+t("#bmi-next-cron").text()+"</b>"+i.data+"<br><b>"+t("#bmi-current-time").text()+"</b>"+i.currdata),e?e=!1:t.bmi.alert("success",t("#bmi-cron-updated").text(),1500)):e?e=!1:t.bmi.alert("error",t("#bmi-cron-updated-fail").text(),2500)})}function n(e){"month"==e?(t(".cron-the").show(),t('[data-id="cron-day"]').show(),t('[data-id="cron-week"]').hide(),t("#cron-on-word").show()):"week"==e?(t(".cron-the").hide(),t('[data-id="cron-day"]').hide(),t('[data-id="cron-week"]').show(),t("#cron-on-word").show()):(t(".cron-the").hide(),t('[data-id="cron-day"]').hide(),t('[data-id="cron-week"]').hide(),t("#cron-on-word").hide())}!0!==i&&(i=!0,t("#bmi").on("change",'[data-id="cron-period"]',function(t){o(),n(t.target.getAttribute("data-selected"))}),t("#bmi").on("change",'[data-id="cron-day"]',function(t){t.target.getAttribute("data-selected");o()}),t("#bmi").on("change",'[data-id="cron-week"]',function(t){t.target.getAttribute("data-selected");o()}),t("#bmi").on("change",'[data-id="cron-hour"]',function(t){t.target.getAttribute("data-selected");o()}),t("#bmi").on("change",'[data-id="cron-minute"]',function(t){t.target.getAttribute("data-selected");o()}),t("#bmi").on("change",'[data-id="cron-keep-backups"]',function(t){t.target.getAttribute("data-selected");o()}),t("#i-backup-cron").on("click",function(){t(".cron-backups").find(".turned-off").is(":visible")&&(t("#cron-btn-toggle").prop("checked",!1),t(".cron-backups").removeClass("disabled"),o(),t(".cron-backups").find(".turned-on").css({opacity:0}),t(".cron-backups").find(".turned-off").css({opacity:0}),t(".cron-backups").find(".turned-on").show(),t(".cron-backups").find(".turned-on").css({opacity:1}),setTimeout(function(){t(".cron-backups").find(".turned-off").hide()},300))}),t("#cron-btn-toggle").on("change",function(){this.checked?t(".cron-backups").addClass("disabled"):t(".cron-backups").removeClass("disabled"),o()}),n(t('[data-id="cron-period"]')[0].getAttribute("data-selected")),o())}}),jQuery(document).ready(function(t){t.bmi.dropdowns={init:function(){let e=t("#bmi");function i(e="null",i="---"){let o=t(".option-template").clone();return o.removeClass("option-template"),o.attr("data-value",e),o.text(i),o}function o(o){if("none"!=o.style.display){o.style.display="none";let n=t(o),s=n.find("option"),r=function(e="---"){let i=t(".dropdown-template").clone();return i.removeClass("dropdown-template"),i.find(".dropdown-title").text(e),i}(function(t){let e="";for(let i=0;i<t.length;++i){let o=t[i].innerText;e.length<o.length&&(e=o)}return e}(s));r=function(e,o){let n=t(e).find(".dropdown-options");t(e).attr("data-optioner")&&(n=t(".optioner-"+t(e).attr("data-optioner")));for(let t=0;t<o.length;++t){let e=o[t];n.append(i(e.value,e.innerText))}return e}(r,s);let a=s[0].value,l=o.getAttribute("data-parent"),c=o.getAttribute("data-classes"),d="true"===o.getAttribute("data-hide");if(n.attr("data-def")&&(a=n.attr("data-def")),t(r).attr("data-id",o.id),t(r).attr("class",((null!=c?c:"")+" bmi-dropdown").trim()),t(r).insertBefore(n),null!==l){let e=parseInt(864197532*Math.random()+123456789);t(r).attr("data-optioner",e),t(r).find(".dropdown-options").attr("data-oparent",e),t(r).find(".dropdown-options").addClass("optioner-"+e),t(r).find(".dropdown-options").appendTo(l),t(l).css({position:"relative"})}let u=t(r).clone();if(!u)return;u[0].style.visibility="hidden",e.append(u);let p=u.width();u.remove(),t.bmi.setOption(t(r),null,a),t(r).find(".dropdown-title")[0].style.minWidth=p+10+"px",d&&t(r).hide()}}!function(){let t=e.find("select");for(let e=0;e<t.length;++e)o(t[e])}(),t.bmi.crons(),e.on("click",function(e){t(e.target).hasClass("bmi-dropdown")||e.target.closest(".bmi-dropdown")||t.bmi.hideAllLists()}),e.on("click",".dropdown-title",function(e){$dropdown=t(e.target.closest(".bmi-dropdown")),function(e){let i=e.find(".dropdown-options");if(e.attr("data-optioner")){(i=t(".optioner-"+e.attr("data-optioner"))).css({position:"absolute"});let o=e[0].offsetWidth,n=e[0].offsetLeft+240,s=e[0].offsetTop+e[0].offsetHeight+5;i.css({maxWidth:o+"px",minWidth:o+"px",top:s+"px",left:n+"px"})}i.hasClass("dropdown-open")?(e.removeClass("active"),i.removeClass("dropdown-open"),i.hide(300)):(e.addClass("active"),i.addClass("dropdown-open"),i.addClass("ignored-open"),i.show(300))}($dropdown),t.bmi.hideAllLists()}),e.on("click",".dropdown-option",function(e){t(e.target.closest(".dropdown-options")).attr("data-oparent")?($dropdown=t('.bmi-dropdown[data-optioner="'+t(e.target.closest(".dropdown-options")).attr("data-oparent")+'"]'),$option=t(e.target),t.bmi.setOption($dropdown,$option)):($dropdown=t(e.target.closest(".bmi-dropdown")),$option=t(e.target),t.bmi.setOption($dropdown,$option))})}}}),jQuery(document).ready(function(t){var e,i,o=!1,n=!1,s=0,r=!1;let a=0,l=0,c=0,d=null,u=null,p=null,m=null,g=!1,f=!1,h=1e4,_=!1,b=!1,v=null,w=!1,y=!1,x=!1,k={},C=[],T=null,$=!1,I="";function z(e){return $cb=t("#"+e).is(":checked"),!0===$cb?"true":"false"}function S(){return size=0,t("#files-group-backup").is(":checked")&&(t("#files-group-plugins").is(":checked")&&(size+=parseInt(t('label[for="files-group-plugins"]').find(".value").attr("bytes"))),t("#files-group-uploads").is(":checked")&&(size+=parseInt(t('label[for="files-group-uploads"]').find(".value").attr("bytes"))),t("#files-group-themes").is(":checked")&&(size+=parseInt(t('label[for="files-group-themes"]').find(".value").attr("bytes"))),t("#files-group-other-contents").is(":checked")&&(size+=parseInt(t('label[for="files-group-other-contents"]').find(".value").attr("bytes"))),t("#files-group-wp-install").is(":checked")&&(size+=parseInt(t('label[for="files-group-wp-install"]').find(".value").attr("bytes")))),t("#database-group-backup").is(":checked")&&(size+=parseInt(t('label[for="database-group-backup"]').find(".value").attr("bytes"))),size}function O(e,i){if(c+=1,a+=parseInt(i.bytes),l+=parseInt(i.excluded),i.bytes<=1e4)t("#bmi-scan-"+e).find(".value").text("(0 MB)");else{let o=(parseInt(i.bytes)/1024/1024).toFixed(2);t("#bmi-scan-"+e).find(".value").text("("+o+" MB)")}t("#bmi-scan-"+e).find(".value").attr("bytes",parseInt(i.bytes)),t("#bmi-scan-"+e).find(".value").attr("excluded",parseInt(i.excluded)),6==c&&(t("#bmi-scan-total").find(".value").text("("+t.bmi.bytesToHuman(a)+")"),t("#bmi-scan-total").find(".value").attr("bytes",parseInt(a)),B())}function E(e){return new Promise(function(i){t.bmi.ajax("scan-directory",{folder:e}).then(function(t){setTimeout(i,150),O(e,t)}).catch(function(t){setTimeout(i,150),O(e,{bytes:"0",excluded:"0",readable:"0 B"})})})}function A(e,i=!1){i&&(t("#bmi-scan-total").find(".value").html('(<div class="spinner-loader"></div>)'),t("#bmi-scan-total").find(".value").removeAttr("bytes"));for(let i=0;i<e.length;i++)t("#bmi-scan-"+e[i]).find(".value").html('(<div class="spinner-loader"></div>)'),t("#bmi-scan-"+e[i]).find(".value").removeAttr("bytes");t("#esta-exclude").html('(<div class="spinner-loader"></div>)'),t("#esta-exclude-total").html('(<div class="spinner-loader"></div>)'),t("#esta-size-for").html('(<div class="spinner-loader"></div>)');let o="";for(let t=0;t<12;++t)o+="<div></div>";t(".spinner-loader").html(o).addClass("lds-spinner")}async function D(){c=0,a=0,l=0;let t=["plugins","uploads","themes","contents_others","wordpress","database"];await A(t,!0);for(let e=0;e<t.length;e++)await E(t[e])}function L(e=!1,i=function(){}){t.bmi.ajax("is-running-backup",{}).then(function(o){void 0!==o.ongoing&&t.bmi.fillOnGoing(o.ongoing),"success"==o.status?i(!1):1==e?i(!0):(t.bmi.modal("freeze-loading-modal").close(),t.bmi._msg(o))}).catch(function(e){i(!1),t.bmi.modal("freeze-loading-modal").close()})}function R(e=!1){return new Promise(i=>{t.bmi.ajax("force-backup-to-stop").then(function(o){return e&&t.bmi.alert("success",t("#bmi-force-stop-success").text(),6e3),i(!0)}).catch(function(o){return e&&t.bmi.alert("error",t("#failed-to-stop").text(),6e3),i(!1)})})}function B(){let e=parseInt(t('label[for="files-group-plugins"]').find(".value").attr("bytes")),i=parseInt(t('label[for="files-group-uploads"]').find(".value").attr("bytes")),o=parseInt(t('label[for="files-group-themes"]').find(".value").attr("bytes")),n=parseInt(t('label[for="files-group-other-contents"]').find(".value").attr("bytes")),s=parseInt(t('label[for="files-group-wp-install"]').find(".value").attr("bytes")),r=parseInt(t('label[for="database-group-backup"]').find(".value").attr("bytes")),a=0,l=parseInt(t('label[for="files-group-plugins"]').find(".value").attr("excluded"))+parseInt(t('label[for="files-group-uploads"]').find(".value").attr("excluded"))+parseInt(t('label[for="files-group-themes"]').find(".value").attr("excluded"))+parseInt(t('label[for="files-group-other-contents"]').find(".value").attr("excluded"))+parseInt(t('label[for="files-group-wp-install"]').find(".value").attr("excluded"))+parseInt(t('label[for="database-group-backup"]').find(".value").attr("excluded")),c=l+e+i+o+n+s+r;t("#files-group-backup").is(":checked")?(t("#files-group-plugins").is(":checked")||(l+=e),t("#files-group-uploads").is(":checked")||(l+=i),t("#files-group-themes").is(":checked")||(l+=o),t("#files-group-other-contents").is(":checked")||(l+=n),t("#files-group-wp-install").is(":checked")||(l+=s)):l+=e+i+o+n+s,t("#database-group-backup").is(":checked")?t("#bmi_total_size_excluded").length>0&&t("#bmi-pro-db-tables-exclusion").is(":checked")&&(a=1024*parseFloat(t("#bmi_total_size_excluded").text().split("/")[0])*1024,isNaN(a)||(l+=a)):l+=r,t("#esta-exclude").text(t.bmi.bytesToHuman(l)),t("#esta-exclude-total").text(t.bmi.bytesToHuman(c)),t("#esta-size-for").text(t.bmi.bytesToHuman(c-l))}function P(e){"backup-prenotice"==e?q():(t.bmi.modal("freeze-loading-modal").close(),setTimeout(function(){t.bmi.modal(e).open()},300))}function M(t,e=function(){}){"is_allowed"==t?e("not-allowed"):e()}function j(){t("#prenotice-modal .prenotice").hide(),t("#prenotice-size").text(t("#esta-size-for").text()),t(".prenotic-3").show(),"true"!==z("database-group-backup")||"true"!==z("database-group-backup")||"true"===z("files-group-backup")&&("true"!==z("files-group-plugins")&&"true"!==z("files-group-themes")&&"true"!==z("files-group-uploads")&&"true"!==z("files-group-wp-install")&&z("files-group-other-contents"),1)||t(".prenotic-6").show(),"true"===z("database-group-backup")||"true"===z("database-group-backup")||"true"!==z("files-group-backup")||"true"!==z("files-group-plugins")&&"true"!==z("files-group-themes")&&"true"!==z("files-group-uploads")&&"true"!==z("files-group-wp-install")&&"true"!==z("files-group-other-contents")||t(".prenotic-5").show(),"true"===z("database-group-backup")&&"true"===z("files-group-backup")&&"true"===z("files-group-plugins")&&"true"===z("files-group-themes")&&"true"===z("files-group-uploads")&&"true"===z("files-group-other-contents")||t(".prenotic-4").show(),t("#prenotice-modal .prenotice:visible").css({background:""});let e=t("#prenotice-modal .prenotice"),i=[];for(let t=0;t<e.length;++t)"none"!==e[t].style.display&&i.push(e[t]);for(let t=0;t<i.length;t+=2)i[t].style.background="#f8f8f8"}function q(){t.bmi.modal("freeze-loading-modal").open(),j(),L(!1,function(){setTimeout(function(){t.bmi.modal("freeze-loading-modal").close(),setTimeout(function(){t.bmi.modal("prenotice-modal").open()},300)},300)})}function H(e=!1,i=!1,o=(()=>{})){e&&e.preventDefault();let n={},s=i;if(0!=e&&0==i&&(s=t(this.closest(".save-action")).data("save")),s){if("save-storage"==s)n.directory=t("#bmi_path_storage_default").val(),n.access="true"===t('[name="radioAccessViaLink"]:checked').val()?"true":"false",n.gdrive=!0===t("#bmi-pro-storage-gdrive-toggle").is(":checked")?"true":"false",t("#bmip-googledrive-path").length>0?n.gdrivedirname=t("#bmip-googledrive-path").val().trim():n.gdrivedirname="BACKUP_MIGRATION_BACKUPS";else if("save-file-config"==s){if(n.database_group=z("database-group-backup"),n.files_group=z("files-group-backup"),t("#bmi-pro-db-tables-exclusion").length>0){n["db-exclude-tables-group"]=z("bmi-pro-db-tables-exclusion"),n["db-excluded-tables"]=["empty"];let e=t(".bmi_pro_tables_display").find("input:checked");if(e.length>0){n["db-excluded-tables"]=[];for(let t=0;t<e.length;++t)n["db-excluded-tables"].push(e[t].value)}else n["db-exclude-tables-group"]="false"}else n["db-exclude-tables-group"]="false",n["db-excluded-tables"]=["empty"];n["files-group-plugins"]=z("files-group-plugins"),n["files-group-uploads"]=z("files-group-uploads"),n["files-group-themes"]=z("files-group-themes"),n["files-group-other-contents"]=z("files-group-other-contents"),n["files-group-wp-install"]=z("files-group-wp-install"),n.files_by_filters=z("files_by_filters"),n.ex_b_fs=z("ex_b_fs"),n.BFFSIN=t("#BFFSIN").val()?t("#BFFSIN").val():"1",n.ex_b_names=z("ex_b_names"),n.ex_b_fpaths=z("ex_b_fpaths"),n.ex_b_dpaths=z("ex_b_dpaths");let e=[],i=t("#bmi_exclusion_rules").find(".exclude-row");for(let o=0;o<i.length;++o){let n=t(i[o]),s=n.find(".exclusion_txt").val(),r=n.find(".exclusion_position").find(".bmi-dropdown").data("selected")+"",a=n.find(".exclusion_where").find(".bmi-dropdown").data("selected")+"";e.push({txt:s,pos:r,whr:a})}n["dynamic-names"]=e,n["dynamic-fpaths-names"]=t("#dynamic-fpaths-names").val().split("\n"),n["dynamic-dpaths-names"]=t("#dynamic-dpaths-names").val().split("\n")}else if("store-config"==s)n.name=t("#backup_filename").val().trim();else{if("save-other-options"!=s)return;n.email=t("#email-for-notices").val().trim(),n.email_title=t("#email-title-for-notices").val().trim(),n.schedule_issues=z("scheduled-issues"),n.experiment_timeout=z("experimental-timeout"),n.experimental_hard_timeout=z("experimental-hard-timeout"),n.php_cli_disable_others=z("cli-disable-others"),n.php_cli_manual_path=t("#cli-manual-path").val().trim(),n.download_technique=z("download-technique"),n.uninstall_config=z("uninstalling-configs"),n.uninstall_backups=z("uninstalling-backups"),n.normal_timeout=z("normal-timeout"),n.db_queries_amount=t("#db_queries_amount").val().trim(),n.db_search_replace_max=t("#db_search_replace_max").val().trim(),n.file_limit_extraction_max=t("#file_limit_extraction_max").val().trim(),n["bmi-restore-splitting"]=z("bmi-restore-splitting"),n["bmi-db-v3-restore-engine"]=z("bmi-db-v3-restore-engine"),n["remove-assets-before-restore"]=z("remove-assets-before-restore"),n["hide-promotional-bmi-banners"]=z("hide-promotional-bmi-banners"),n["bmi-db-single-file-backup"]=z("bmi-db-single-file-backup"),n["bmi-db-batching-backup"]=z("bmi-db-batching-backup"),n["bmi-disable-space-check-function"]=z("bmi-do-not-check-free-space-backup")}t.bmi.ajax(s,n).then(function(i){"success"==i.status?i.errors<=0?(e&&t.bmi.alert("success",t("#bmi-save-success").text(),3e3),void 0!==window.saveStorageWithoutClose&&!0===window.saveStorageWithoutClose?window.saveStorageWithoutClose=!1:e&&t.bmi.collapsers.closeAll()):e&&t.bmi.alert("warning",t("#bmi-save-issues").text(),3e3):t.bmi._msg(i)}).catch(function(t){}).finally(()=>{"save-file-config"==s&&D(),o()})}}function N(t,e=function(){}){let i=window.location.protocol.includes("https");t=t.includes("https")?t.slice(5):t.slice(4),t=i?"https"+t:"http"+t;try{window.XMLHttpRequest?xmlhttp=new XMLHttpRequest:xmlhttp=new ActiveXObject("Microsoft.XMLHTTP"),xmlhttp.onloadend=function(){4==xmlhttp.readyState&&200==xmlhttp.status?e(xmlhttp.responseText):e(!1)},xmlhttp.open("GET",t),xmlhttp.send()}catch(t){e(!1)}}function F(i){let r=C[s],a=document.createElement("DIV"),l="";if(void 0===r||!r)return;"[INFO]"==r.substr(0,6)?l="blue":"[SUCCESS]"==r.substr(0,9)?l="green":"[WARN]"==r.substr(0,6)?l="orange":"[ERROR]"==r.substr(0,7)?l="red":"[END-CODE]"==r.substr(0,10)?l="hide_so_much":"[VERBOSE]"==r.substr(0,9)?l="hide_verbose":"[STEP]"==r.substr(0,6)?(a.classList.add("bold"),a.classList.add("step")):r&&r.trim().length>0&&"["!=r[0]&&s--;let c="";"[STEP]"==r.substr(0,6)&&(c=r.slice(29)),l.length>0&&a.classList.add(l),a.style.display="none",a.innerText=r,i.appendChild(a);let d=function(){let i=!1;for(let s=0;s<C.length;++s){let r=C[s];if(0==i&&r&&r.trim().includes("[END-CODE]")&&(!0===b||!0===x||!0===y)){i=!0;let s=r;!0===y?s.includes("205")?(y=!1,t("#restore-progress-modal .progress-active-bar")[0].style.width="0%",t("#restore-progress-modal .progress-percentage")[0].style.left="0%",t("#restore-progress-modal .progress-percentage")[0].innerText="0%",ut(!0)):ct():!0===x?(s.includes("001")?setTimeout(function(){dt()},1e3):ct(),f=!1,x=!1):(b=!1,s.includes("001")?(o=!0,n=!0,clearTimeout(e),g=!1,Y({filename:v},!0)):s.includes("002")?tt(1):s.includes("003")?(t.bmi.modal("backup-progress-modal").close(),t.bmi.alert("info",t("#bmi-aborted-al").text(),3e3)):s.includes("100")?(t.bmi.modal("backup-progress-modal").close(),et(),t.bmi.modal("backup-progress-modal").close()):tt(2))}}return i}();t(a).show(40,function(){""!=c&&c!=I&&(I=c,t("#restore-progress-modal").hasClass("open")?t("#restore_current_step").text(c):t("#current_step").text(c))}),i.scrollTop=i.scrollHeight,++s<C.length&&0==d?($=!0,T=setTimeout(function(){F(i)},40)):$=!1}function G(t,e){if(!1===t)return;let i=t.split("\n");i.length>=1&&(i=i.slice(0,-1)),C=i,0==$&&s<C.length&&F(e)}function U(e=0,s=1e3,r=null){if(u==e)return;u=e,clearInterval(i);let a=parseFloat(t(".progress-percentage")[0].style.left)-1;t("#restore-progress-modal").hasClass("open")&&(a=parseFloat(t("#restore-progress-modal .progress-percentage")[0].style.left)-1);let l=e-a,c=a,d=Math.abs(Math.floor(s/l));i=setInterval(function(){if(c+=1,t("#restore-progress-modal").hasClass("open")?(t("#restore-progress-modal .progress-active-bar")[0].style.width=c.toFixed(2)+"%",t("#restore-progress-modal .progress-percentage")[0].style.left=c.toFixed(2)+"%",t("#restore-progress-modal .progress-percentage")[0].innerText=c.toFixed(0)+"%"):(t(".progress-active-bar")[0].style.width=c.toFixed(2)+"%",t(".progress-percentage")[0].style.left=c.toFixed(2)+"%",t(".progress-percentage")[0].innerText=c.toFixed(0)+"%"),c>=100&&clearInterval(i),c>=100&&null!=r&&(u=null,t("#backup-progress-modal").hasClass("open"))){o=!0,n=!0,Y(r,0==g)}c>e&&clearInterval(i)},d)}t("#live-log-toggle").on("click",function(){t(".expanded-logs").length>0?t(this).text(t(this).data("hide")):t(this).text(t(this).data("show")),t("#live-log-wrapper").toggleClass("expanded-logs")}),t("#backup-stop").on("click",function(){if("true"===z("experimental-hard-timeout"))return t.bmi.modal("freeze-loading-modal").open(),void(r=!0);t.bmi.ajax("stop-backup",{}).then(function(e){"success"==e.status?t.bmi.alert("success",t("#bmi-abort-soon").text(),3e3):t.bmi._msg(e)}).catch(function(t){})}),t("#bmi-force-backup-to-stop").on("click",function(e){e.preventDefault(),t.bmi.alert("info",t("#bmi-force-stop-in-progress").text(),3e3),t.bmi.ajax("force-backup-to-stop").then(function(e){t.bmi.alert("success",t("#bmi-force-stop-success").text(),6e3)}).catch(function(e){t.bmi.alert("error",t("#failed-to-stop").text(),6e3)})}),t("#bmi-force-restore-to-stop").on("click",function(e){e.preventDefault(),t.bmi.alert("info",t("#bmi-force-stop-in-progress").text(),3e3),t.bmi.ajax("force-restore-to-stop").then(function(e){t.bmi.alert("success",t("#bmi-force-stop-success").text(),6e3)}).catch(function(e){t.bmi.alert("error",t("#failed-to-stop").text(),6e3)})}),t("#bmi_restore_tbody").on("click",".bc-unlocked-btn",function(e){e.preventDefault();let i=e.target,o=i.closest("tr").querySelector(".br_name").innerText.trim();t.bmi.ajax("lock-backup",{filename:o}).then(function(e){"success"==e.status?(t.bmi.alert("success",t("#bmi-lock-success").text(),6e3),t(i.closest("tr").querySelector(".bc-unlocked-btn")).hide(),t(i.closest("tr").querySelector(".bc-locked-btn")).show()):(t.bmi.alert("error",t("#bmi-lock-error").text(),8e3),console.error("BMI Backend error: ",e))}).catch(function(t){})}),t("#files-group-backup").on("change",B),t("#database-group-backup").on("change",B),t(".basic-file-exlusion").on("change",'input[type="checkbox"]',B),t("#bmi_restore_tbody").on("click",".bc-locked-btn",function(e){if(e.preventDefault(),t(e.target).hasClass("forever"))return;let i=e.target,o=i.closest("tr").querySelector(".br_name").innerText.trim();t.bmi.ajax("unlock-backup",{filename:o}).then(function(e){"success"==e.status?(t.bmi.alert("success",t("#bmi-unlock-success").text(),3e3),t(i.closest("tr").querySelector(".bc-locked-btn")).hide(),t(i.closest("tr").querySelector(".bc-unlocked-btn")).show()):(t.bmi.alert("error",t("#bmi-unlock-error").text(),3e3),console.error("BMI Backend error: ",e))}).catch(function(t){})}),t("#bmi_restore_tbody").on("click",".bc-url-btn",function(e){let i=e.target.closest("tr").querySelector(".bc-download-btn").getAttribute("href");t.bmi.clipboard(i,bmiVariables.urlCopies)}),t("#stg-tbody-table").on("click",".bc-stg-url-btn",function(e){let i=e.target.closest("tr").querySelector(".stg-tr-url-el").getAttribute("href");t.bmi.clipboard(i,bmiVariables.urlCopies)}),t("#bmi_restore_tbody").on("click",".bc-remove-btn",function(e){let i=e.target,o=i.closest("tr").querySelector(".br_name").innerText.trim(),n=i.closest("tr").querySelector(".strg-gdrive").classList.contains("img-green"),s="no"==t(i.closest("tr")).data("is-local");p=[o],(m={})[o]={md5:i.closest("tr").getAttribute("md5"),gid:i.closest("tr").getAttribute("gdrive-id")},t("#delete-confirm-modal").find(".text2").hide(),t("#delete-confirm-modal").find(".text3").hide(),t("#delete-confirm-modal").find(".text4").hide(),t("#delete-confirm-modal").find(".text1").show(),n?t(".bmi-cloud-removal").show():t(".bmi-cloud-removal").hide(),t("#remove-cloud-backup-as-well")[0].checked=!1,n&&s&&(t("#remove-cloud-backup-as-well")[0].checked=!0,t(".bmi-cloud-removal").hide(),t("#delete-confirm-modal").find(".text1").hide(),t("#delete-confirm-modal").find(".text2").hide(),t("#delete-confirm-modal").find(".text3").hide(),t("#delete-confirm-modal").find(".text4").show(),t(".del-more-than-one").hide(),t(".del-only-one").show()),t.bmi.modal("delete-confirm-modal").open()}),t("#sure_delete").on("click",function(e){e.preventDefault(),t.bmi.modal("delete-confirm-modal").close(),t.bmi.modal("freeze-loading-modal").open(),t.bmi.ajax("delete-backup",{filenames:p,deleteCloud:t("#remove-cloud-backup-as-well")[0].checked?"yes":"no",cloudDetails:m}).then(function(e){p=null,m=null,t("#remove-cloud-backup-as-well")[0].checked=!1,t.bmi.modal("freeze-loading-modal").close(),"success"==e.status?(t.bmi.reloadBackups(),t.bmi.alert("success",t("#bmi-remove-success").text(),3e3)):(t.bmi.alert("warning",t("#bmi-remove-error").text(),3e3),console.error("BMI Backend error: ",e))}).catch(function(e){t.bmi.modal("freeze-loading-modal").close()})}),t(".bmi-send-troubleshooting-logs").on("click",function(e){e.preventDefault(),t.bmi.alert("info",t("#bmi-support-send-start").text(),6e3),t(".bmi-send-troubleshooting-logs").addClass("disabled");let i=!1,o=!1,n=!1;t("#backup-error-modal").is(":visible")&&(t.bmi.modal("backup-error-modal").close(),i=!0,o=!1,n=!1),t("#restore-error-modal").is(":visible")&&(t.bmi.modal("restore-error-modal").close(),o=!0,i=!1,n=!1),t("#staging-error-modal").is(":visible")&&(t.bmi.modal("staging-error-modal").close(),o=!1,i=!1,n=!0),t.bmi.modal("freeze-loading-modal").open();let s=t("#after-logs-sent-modal").attr("data-error-source");t.bmi.ajax("send-troubleshooting-logs",{source:s}).then(function(e){t.bmi.modal("freeze-loading-modal").close(),"success"==e.status?(t("#bmi-support-code-generated").text(e.code),setTimeout(function(){t.bmi.alert("success",t("#bmi-support-send-success").text(),4e3),t.bmi.modal("after-logs-sent-modal").open()},300)):(t.bmi.alert("error",t("#bmi-support-send-fail").text(),6e3),o&&t.bmi.modal("restore-error-modal").open(),i&&t.bmi.modal("backup-error-modal").open(),n&&t.bmi.modal("staging-error-modal").open()),t(".bmi-send-troubleshooting-logs").removeClass("disabled")}).catch(function(e){t.bmi.modal("freeze-loading-modal").close(),t.bmi.alert("success",t("#bmi-support-send-fail").text(),6e3),alert("Something went wrong on your browser side and we could not send your logs to support team."),t(".bmi-send-troubleshooting-logs").removeClass("disabled"),o&&t.bmi.modal("restore-error-modal").open(),i&&t.bmi.modal("backup-error-modal").open(),n&&t.bmi.modal("staging-error-modal").open()})}),t("#share-logs-allowed").on("click",function(e){e.preventDefault();let i=t("#logs-sharing-ask-modal").attr("data-destination");t.bmi.alert("success",t("#bmi-share-logs-thank-you").text(),3e3),t.bmi.modal("logs-sharing-ask-modal").close(),t.bmi.modal("freeze-loading-modal").open(),M("set_yes",function(){setTimeout(function(){P(i)},300)})}),t("#share-logs-not-allowed").on("click",function(e){e.preventDefault();let i=t("#logs-sharing-ask-modal").attr("data-destination");t.bmi.modal("logs-sharing-ask-modal").close(),t.bmi.modal("freeze-loading-modal").open(),M("set_no",function(){setTimeout(function(){P(i)},300)})}),t("#ignore-share-log-request-for-now").on("click",function(e){e.preventDefault(),t.bmi.modal("logs-sharing-ask-modal").close(),P(t("#logs-sharing-ask-modal").attr("data-destination"))}),t("#add-exclusion-rule").on("click",function(e){e.preventDefault();let i=t(".exclusion_template").clone();i[0].classList.remove("exclusion_template"),i[0].style.display="none",t("#bmi_exclusion_rules").append(i),i.show(300)}),t("#bmi_exclusion_rules").on("click",".kill-exclusion-rule",function(e){e.preventDefault(),$el=e.target,$parent=$el.closest(".exclude-row"),$parent&&(t($parent).hide(300),setTimeout(function(){$parent.remove()},320))}),t("#i-backup-creator, .i-backup-creator-trigger").on("click",function(){if(!isNaN(S()))return S()/1024/1024>1e3*parseInt(t("#BMI_REV").text().trim())?et():void("true"===z("database-group-backup")||"true"===z("files-group-backup")&&("true"===z("files-group-plugins")||"true"===z("files-group-themes")||"true"===z("files-group-uploads")||"true"===z("files-group-wp-install")||"true"===z("files-group-other-contents"))?(t.bmi.modal("freeze-loading-modal").open(),setTimeout(function(){M("is_allowed",function(e){"ask"===e?(t.bmi.modal("freeze-loading-modal").close(),t("#logs-sharing-ask-modal").attr("data-destination","backup-prenotice"),setTimeout(function(){t.bmi.modal("logs-sharing-ask-modal").open()},300)):q()})},300)):t.bmi.alert("warning",t("#bmi-no-selected").text(),3e3));t.bmi.alert("warning",t("#bmi-preb-processing").text(),3e3)}),t("#BFFSIN").on("change",function(t){let e=parseInt(this.value);isNaN(e)?this.value=1:this.value=e>9999?9999:e<=0?1:e}),t(".save-btn").on("click",H),t(".close-chapters").on("click",function(e){e.preventDefault(),t.bmi.collapsers.closeAll()}),t("#rescan-for-backups").on("click",function(e){e.preventDefault(),t.bmi.reloadBackups()}),t(".storage-checkbox").on("click",function(){let e=t(this).attr("data-toggle"),i=t(t(this)[0].closest(".tab2-item"));t(this).is(":checked")?(t("#"+e).show(300),i.addClass("activeList")):(t("#"+e).hide(300),i.removeClass("activeList"))});var W=0;function Q(e=function(){}){let i=t("#BMI_BLOG_URL").text().trim();"/"!==i.slice(-i.length)&&(i+="/"),N(i+"?backup-migration=PROGRESS_LOGS&progress-id=latest_full.log&backup-id=current&t="+ +new Date,function(i){if(!i)return e();let o=i.split("\n").slice(0,1)[0];""===o.trim()?(o=i.split("\n").slice(0,2)[1],i=i.split("\n").slice(2).join("\n")):i=i.split("\n").slice(1).join("\n");let n=t(".log-wrapper").find("pre")[0],s=t("#bmi-making-archive").text().trim();if(o&&0!=o&&void 0!==o)if(t("#current_step").text().trim().slice(0,s.length)==s){let e=document.getElementById("bmi_counter_magic");if(e){let i=parseInt(e.innerText);W=parseInt(o.split("/")[0]),isNaN(i)||isNaN(W)||(U(parseInt(o.split("/")[0])/parseInt(o.split("/")[1])*100),async function(t,e,i,o){let n=null,s=function(r){if(W>i)return;n||(n=r);let a=Math.min((r-n)/o,1);t.innerText=Math.floor(a*(i-e)+e),a<1&&window.requestAnimationFrame(s)};window.requestAnimationFrame(s)}(e,i,W,2e3),"---"===t("#bmi_magic_max_count").text()&&100!=parseInt(o.split("/")[1])&&(t("#bmi_magic_max_count").text(parseInt(o.split("/")[1])),t("#entire_magic_counter").is(":hidden")&&t("#entire_magic_counter").show()))}else{let e=parseInt(o.split("/")[1]);100==e&&(e="---"),t("#current_step").html(s+' <span id="entire_magic_counter">(<span id="bmi_counter_magic">0</span>/<span id="bmi_magic_max_count">'+e+"</span>)</span>"),(isNaN(parseInt(e))||"---"==e)&&t("#entire_magic_counter").hide()}}else U(parseInt(o.split("/")[0])/parseInt(o.split("/")[1])*100);i&&0!=i&&void 0!==i&&G(i,n),e()})}function V(i=!1){0==i&&(t(".log-wrapper").find("pre")[0].innerText=""),U(0),setTimeout(function(){Q(function(){!function t(){Q(function(){clearTimeout(e),e=setTimeout(function(){!0===g&&t()},1500)})}()})},300)}function X(i=!0){!0===i&&(t(".log-wrapper").find("pre")[0].innerText="",U(0)),rt(function(){clearTimeout(e),function t(){rt(function(){e=setTimeout(function(){!0!==f&&!0!==y||t()},800)})}()})}function K(t=function(){}){L(!0,function(e){t(e)})}function J(e=!1,i=function(){}){t.bmi.ajax("reset-latest",{}).then(function(o){!0===e?i():"success"==o.status?(i(),setTimeout(function(){t.bmi.modal("freeze-loading-modal").close(),setTimeout(function(){t.bmi.modal("backup-progress-modal").open()},300)},300)):t.bmi._msg(o)}).catch(function(t){})}function Y(s,r=!1){(o&&n||r)&&setTimeout(function(){g=!1,clearInterval(i),clearTimeout(e);let o=t("#BMI_BLOG_URL").text().trim();"/"!==o.slice(-o.length)&&(o+="/"),t.bmi.ajax("get-latest-backup",{}).then(function(e){let n=o+"?backup-migration=BMI_BACKUP&backup-id="+e+"&t="+ +new Date,s=o+"?backup-migration=PROGRESS_LOGS&progress-id=latest.log&backup-id=current&t="+ +new Date;t("#text-input-copy")[0].value=n,t("#download-backup-url").attr("href",n),t(".download-backup-log-url").attr("href",s),t.bmi.reloadBackups(),setTimeout(function(){clearInterval(i),t(".log-wrapper").find("pre")[0].innerText="",t(".progress-active-bar")[0].style.width="0%",t(".progress-percentage")[0].style.left="0%",t(".progress-percentage")[0].innerText="0%"},300),t("#backup-progress-modal").hasClass("open")&&(t.bmi.modal("backup-progress-modal").close(),"true"==t('[name="radioAccessViaLink"]:checked').val()?t("#accessible-at-section").show():t("#accessible-at-section").hide(),t.bmi.modal("backup-success-modal").open())}).catch(function(e){t("#backup-progress-modal").hasClass("open")&&(t.bmi.modal("backup-progress-modal").close(),"true"==t('[name="radioAccessViaLink"]:checked').val()?t("#accessible-at-section").show():t("#accessible-at-section").hide(),t.bmi.modal("backup-success-modal").open());let n=o+"?backup-migration=BMI_BACKUP&backup-id="+s.filename+"&t="+ +new Date,r=o+"?backup-migration=PROGRESS_LOGS&progress-id=latest.log&backup-id=current&t="+ +new Date;t("#text-input-copy")[0].value=n,t("#download-backup-url").attr("href",n),t(".download-backup-log-url").attr("href",r),t.bmi.reloadBackups(),setTimeout(function(){clearInterval(i),t(".log-wrapper").find("pre")[0].innerText="",t(".progress-active-bar")[0].style.width="0%",t(".progress-percentage")[0].style.left="0%",t(".progress-percentage")[0].innerText="0%"},300)})},700)}function Z(e=!1){return new Promise(async i=>{let o=e;if(!1===o)return i(!1);if("object"!=typeof o)return i(!1);if(void 0===o[0])return i(!1);if(void 0===o[0].status)return i(!1);if(void 0===o[0].statusText)return i(!1);if(void 0===o[0].responseText)return i(!1);o[0].status,o[0].statusText,o[0].responseText;let n=z("cli-disable-others");z("normal-timeout"),z("experimental-timeout");return 1==z("experimental-hard-timeout")&&1==n?i(!1):(await R(),t("#cli-disable-others").prop("checked",!0),t("#experimental-hard-timeout").prop("checked",!0).change(),await new Promise(async t=>{H(!1,"save-other-options",t)}),await function(t=1){return new Promise(async e=>{setTimeout(()=>e(),1e3*t)})}(3),setTimeout(()=>{nt(null,!0)}),i(!0))})}async function tt(o=-1,n=!1){clearInterval(i),clearTimeout(e),t(".progress-active-bar")[0].style.width="0%",t(".progress-percentage")[0].style.left="0%",t(".progress-percentage")[0].innerText="0%",n&&await Z(n)||setTimeout(function(){t(".log-wrapper").find("pre")[0].innerText="",t.bmi.modal("backup-progress-modal").close(),t.bmi.modal("backup-error-modal").open(),t("#after-logs-sent-modal").attr("data-error-source","backup")},2e3)}function et(){t.bmi.modal("bfs-modal").open()}function it(e){let i=e.status,o=parseInt(e.errors),n=parseInt(e.iteratio),s=parseInt(e.dbiteratio),r=parseInt(e.dblast),a=parseInt(e.sf);if(!0===i&&-1===n)return b=!1,v=!1,w=!1,window.onbeforeunload=null,t(".backup-minimize").removeClass("disabled"),Y({filename:v},!0);if(!isNaN(a)&&a>-1&&(w.filessofar=a),w.dbiteratio=s,w.iteratio=n,w.dblast=r,isNaN(o)||o>0||0==i){if(isNaN(o)||o>0)return b=!1,v=!1,w=!1,window.onbeforeunload=null,t(".backup-minimize").removeClass("disabled"),t("#backup-progress-modal").hasClass("open")?tt(3):void 0}else ot(w,o)}function ot(t,e=0){!0!==r?(!1===w&&(t.iteratio=0,w=t),function(t,e,i=0){let o=new XMLHttpRequest;o.open("POST",t.url,!0),o.setRequestHeader("Content-Type","application/json"),o.setRequestHeader("Content-Accept","*/*"),o.setRequestHeader("Access-Control-Allow-Origin","*"),o.setRequestHeader("Content-ConfigDir",t.config_dir),o.setRequestHeader("Content-Content",t.content_dir),o.setRequestHeader("Content-Backups",t.backup_dir),o.setRequestHeader("Content-Identy",t.identy),o.setRequestHeader("Content-Url",t.url),o.setRequestHeader("Content-Abs",t.abs_dir),o.setRequestHeader("Content-Dir",t.root_dir),o.setRequestHeader("Content-Manifest",t.manifest),o.setRequestHeader("Content-Name",t.backupname),o.setRequestHeader("Content-Safelimit",t.safelimit),o.setRequestHeader("Content-Start",t.start),o.setRequestHeader("Content-Filessofar",t.filessofar),o.setRequestHeader("Content-Total",t.total_files),o.setRequestHeader("Content-Rev",t.rev),o.setRequestHeader("Content-It",t.iteratio),o.setRequestHeader("Content-Dbit",t.dbiteratio),o.setRequestHeader("Content-Dblast",t.dblast),o.setRequestHeader("Content-Bmitmp",t.bmitmp),o.setRequestHeader("Content-Browser",!0),o.onload=function(){if(200===o.status){let t=o.getResponseHeader("Content-Finished");if(void 0!==t&&t&&"true"==t)return e({status:!0,iteratio:-1,dbiteratio:-1,dblast:0,sf:-1,errors:i=0});let n=o.getResponseHeader("Content-It"),s=o.getResponseHeader("Content-Dbit"),r=o.getResponseHeader("Content-Dblast"),a=o.getResponseHeader("Content-Filessofar");return e(void 0!==n&&n?{status:!0,iteratio:n,dbiteratio:s,dblast:r,sf:a,errors:i}:{status:!1,iteratio:-1,dbiteratio:s,dblast:r,sf:-1,errors:++i})}return e({status:!1,iteratio:-1,dbiteratio:-1,dblast:0,sf:-1,errors:++i})},o.onerror=function(){return e({status:!1,iteratio:-1,dbiteratio:-1,dblast:0,sf:-1,errors:++i})},o.send()}(w,it,e)):async function(){await R(!0),window.onbeforeunload=null,window.location.reload()}()}async function nt(a,l=!1){0==l&&(t.bmi.modal("prenotice-modal").close(),t.bmi.modal("freeze-loading-modal").open()),t(".backup-minimize").removeClass("disabled"),await new Promise(t=>{at(()=>t())}),0==l&&(s=0,await function(t=!1){return new Promise(e=>{J(t,()=>e())})}(!1)),clearTimeout(e),_=!1,o=!1,g=!0,V(l),function(s=!1){r=!1,0==s&&(t.bmi.modal("freeze-loading-modal").close(),t.bmi.modal("backup-progress-modal").open());t.bmi.ajax("create-backup",{preserveLogs:s}).then(function(s){if("success"==s.status)o=!0,clearTimeout(e),g=!1,Q(function(){setTimeout(function(){Y(s,!0)},350)});else if("background"==s.status){b=!0,v=s.filename;let i=document.querySelectorAll(".hide_so_much");if(i&&i.length>0){let s=(i=i[i.length-1]).innerText;s.includes("001")&&(o=!0,n=!0,clearTimeout(e),g=!1,Y({filename:v},!0)),s.includes("002")&&tt(4),s.includes("003")&&(t.bmi.modal("backup-progress-modal").close(),t.bmi.alert("info",t("#bmi-aborted-al").text(),3e3))}}else"background_hard"==s.status?(b=!0,v=s.filename,s.settings.url=s.url,t.bmi.alert("success",t("#bmi-received-hard").text(),3e3),t(".backup-minimize").addClass("disabled"),t("#backup-progress-modal").hasClass("open")||setTimeout(function(){t.bmi.modal("freeze-loading-modal").close(),setTimeout(function(){t.bmi.modal("backup-progress-modal").open()},300)},300),window.onbeforeunload=function(){return"Backup in progress..."},ot(s.settings)):(g=!1,setTimeout(function(){clearInterval(i),t(".log-wrapper").find("pre")[0].innerText="",t(".progress-active-bar")[0].style.width="0%",t(".progress-percentage")[0].style.left="0%",t(".progress-percentage")[0].innerText="0%"},300),t.bmi._msg(s),console.log(s),t.bmi.modal("backup-progress-modal").close(),void 0!==s.bfs?et():tt(5))}).catch(function(t){tt(6,t)})}(l)}function st(e=function(){}){K(function(i){!0===i?t("#backup-progress-modal").hasClass("open")||(!1===g&&(o=!1,g=!0,_=!0),t("#bmi-ongoing-backup").show(300)):(t("#bmi-ongoing-backup").is(":visible")&&t("#bmi-ongoing-backup").hide(300),t("#backup-progress-modal").hasClass("open")&&!0===_?(!0===g&&(g=!1),_=!1,t.bmi.getCurrentBackups(function(e){t.bmi.fillWithNewBackups(e.backups,e.backups.ongoing,function(){!function(){let e=t("#BMI_BLOG_URL").text().trim();"/"!==e.slice(-e.length)&&(e+="/"),N(e+"?backup-migration=PROGRESS_LOGS&progress-id=latest.log&backup-id=current&t="+ +new Date,function(e){if(!1===e)t.bmi.modal("backup-progress-modal").close();else{let i="Backup process aborted",o="[ERROR]";if((e=e.split("\n"))[e.length-1].includes(i)||e[e.length-2].includes(i))t.bmi.modal("backup-progress-modal").close(),t.bmi.alert("info",t("#bmi-aborted-al").text(),3e3);else if(e[e.length-1].includes(o)||e[e.length-2].includes(o))tt(7);else{let e=t("#BMI_BLOG_URL").text().trim();"/"!==e.slice(-e.length)&&(e+="/"),t.bmi.ajax("get-latest-backup",{}).then(function(i){let o=e+"?backup-migration=BMI_BACKUP&backup-id="+i+"&t="+ +new Date,n=e+"?backup-migration=PROGRESS_LOGS&progress-id=latest.log&backup-id=current&t="+ +new Date;t("#text-input-copy")[0].value=o,t("#download-backup-url").attr("href",o),t(".download-backup-log-url").attr("href",n),t.bmi.modal("backup-progress-modal").close(),t.bmi.modal("backup-success-modal").open()}).catch(function(e){t.bmi.modal("backup-progress-modal").close(),t.bmi.modal("backup-success-modal").open();let i=t(t("#bmi_restore_tbody").find("tr")[0]).find(".bc-download-btn").attr("href");t("#download-backup-url").attr({href:i}),t("#text-input-copy").val(i)})}}})}()})})):!0!==g||t("#backup-progress-modal").hasClass("open")||(g=!1,t.bmi.reloadBackups())),e()})}function rt(e=function(){}){let i=t("#BMI_BLOG_URL").text().trim();"/"!==i.slice(-i.length)&&(i+="/"),N(i+"?backup-migration=PROGRESS_LOGS&progress-id=latest_migration_full.log&backup-id=current&t="+ +new Date,function(i){if(!i)return e();let o=i.split("\n").slice(0,1)[0];if(i=i.split("\n").slice(1).join("\n"),!1===o||isNaN(parseFloat(o)))return e();let n=t("#restore-live-log-wrapper").find("pre")[0];i.includes("<")||i.includes(">")||i&&0!=i&&void 0!==i&&G(i,n),U(o),e()})}function at(e=function(){}){t.bmi.ajax("htaccess-litespeed",{}).then(function(t){setTimeout(function(){e(!0)},400)}).catch(function(t){e(!1)})}function lt(e=function(){},i=!1,o=!0){t.bmi.ajax("migration-locked",{clearLogs:o}).then(function(o){"success"==o.status?e(!0):(i||t.bmi._msg(o),e(!1))}).catch(function(t){})}function ct(e=""){setTimeout(function(){t("#restore-progress-modal .progress-active-bar")[0].style.width="0%",t("#restore-progress-modal .progress-percentage")[0].style.left="0%",t("#restore-progress-modal .progress-percentage")[0].innerText="0%"},500),lt(function(e){e?setTimeout(function(){if(!t("#restore-progress-modal").hasClass("open"))return;f=!1,y=!1,t("#restore-error-pre").text(t("#bmi-loading-translation").text().trim()),t("#after-logs-sent-modal").attr("data-error-source","migration");let e=t("#BMI_BLOG_URL").text().trim();"/"!==e.slice(-e.length)&&(e+="/"),t.bmi.modal("restore-progress-modal").close(),t.bmi.modal("restore-error-modal").open()},1e3):setTimeout(function(){t.bmi.modal("restore-progress-modal").close(),t.bmi.modal("restore-error-modal").open()})},!0,!1)}function dt(){t.bmi.modal("restore-progress-modal").close(),t.bmi.modal("restore-success-modal").open(),setTimeout(function(){t("#restore-progress-modal .progress-active-bar")[0].style.width="0%",t("#restore-progress-modal .progress-percentage")[0].style.left="0%",t("#restore-progress-modal .progress-percentage")[0].innerText="0%"},500),x=!1}function ut(o=!1,n=null){let r=d;if(!r||r.trim().length<=0)return t.bmi.alert("warning",t("#bmi-no-file").text(),3e3);if(t("#pre-restore-modal").hasClass("open")&&t.bmi.modal("pre-restore-modal").close(),t("#restore-progress-modal").hasClass("open")||t.bmi.modal("restore-progress-modal").open(),o||(t("#restore-live-log-wrapper").find("pre")[0].innerText=""),null==n){function a(){at(function(){rt(function(){!function o(n,s,r,a=!1,l="false",c={}){null==r&&!0!==s&&X(!0);void 0!==c.storage&&(c.storage=c.storage.replace(/[\\\\/]+/g,"/"));t.bmi.ajax("restore-backup",{file:n,remote:s,secret:r,ignoreRunning:l,tmpname:a,options:c}).then(function(r){if("cli"===r.status){k={l:r.login,u:r.url},x=!0;let t=document.querySelectorAll(".hide_so_much");if(t&&t.length>0){let e=(t=t[t.length-1]).innerText;e.includes("001")?setTimeout(function(){dt(),f=!1,x=!1},1e3):ct()}}else"success"===r.status?(k={l:r.login,u:r.url},setTimeout(function(){clearInterval(i),clearTimeout(e),f=!1,t.bmi.modal("restore-progress-modal").close(),t.bmi.modal("restore-success-modal").open(),setTimeout(function(){t("#restore-progress-modal .progress-active-bar")[0].style.width="0%",t("#restore-progress-modal .progress-percentage")[0].style.left="0%",t("#restore-progress-modal .progress-percentage")[0].innerText="0%"},500)},1500)):"secret"===r.status?(r.options.step=parseInt(r.options.step)+1,o(n,s,r.secret,r.tmp,"true",r.options)):"restore_ongoing"===r.status?(void 0!==r.options.firstDB&&(r.options.firstDB=!1),void 0!==r.options.dbFinished?!0!==r.options.dbFinished&&"true"!==r.options.dbFinished&&"1"!==r.options.dbFinished||(r.options.step=parseInt(r.options.step)+1):void 0!==r.options.dbConvertionFinished?"true"!==r.options.dbConvertionFinished&&!0!==r.options.dbConvertionFinished&&"1"!==r.options.dbConvertionFinished||(r.options.step=parseInt(r.options.step)+1):void 0!==r.options.replaceFinished?"true"!==r.options.replaceFinished&&!0!==r.options.replaceFinished&&"1"!==r.options.replaceFinished||(r.options.step=parseInt(r.options.step)+1):(r.options.step=parseInt(r.options.step)+1,4!=r.options.step&&"4"!=r.options.step||void 0===r.options.repeat_export||!0!==r.options.repeat_export&&"true"!==r.options.repeat_export&&"1"!==r.options.repeat_export||(r.options.step=3,r.options.firstExtract="false")),o(n,s,r.secret,r.tmp,"true",r.options)):"error"===r.status?setTimeout(function(){clearInterval(i),clearTimeout(e),ct()},1e3):(t.bmi.modal("pre-restore-modal").close(),t.bmi.modal("restore-progress-modal").close(),t.bmi._msg(r))}).catch(function(t){ct(t)})}(r,o,n)})})}o||(s=0),f=!0,clearTimeout(e),o?a():J(!0,a)}}function pt(){return t("#bmi_restore_tbody").find('input[type="checkbox"]:checked')}function mt(e){e.preventDefault(),t("#format-tip-wrp")[0].style.minWidth="calc(100% - 120px)","none"===t("#format-tip-wrp")[0].style.display?t("#format-tip-wrp").show(300):t("#format-tip-wrp").hide(300)}t("#configuration-reset-absolute").on("click",function(e){e.preventDefault(),t.bmi.ajax("reset-configuration",{}).then(function(e){"success"==e.status?window.location.reload():t.bmi._msg(e)}).catch(function(t){})}),t("#download-site-infos").on("click",function(e){e.preventDefault(),t.bmi.ajax("get-site-data",{}).then(function(e){"success"==e.status?t.bmi.prepareFile("site_details_troubleshooting.txt",JSON.stringify(e.data)):t.bmi._msg(e)}).catch(function(t){})}),t("#start-entire-backup").on("click",nt),t("#open_trouble_extenstion").on("click",function(){t("#trouble_extenstion").hasClass("openned")?(t("#trouble_extenstion").hide(300),t("#trouble_extenstion").removeClass("openned"),t(this).removeClass("active")):(t("#trouble_extenstion").show(300),t("#trouble_extenstion").addClass("openned"),t(this).addClass("active"))}),t("#switch-show-trs").on("click",function(){let e=this.dataset.see,i=this.dataset.hide,o=t(".hide-show-tr");t(this).hasClass("shown")?(o.hide(300),t(this).removeClass("shown"),this.innerText=e):(o.show(300),t(this).addClass("shown"),this.innerText=i)}),t("#ex_b_fs").on("change",function(){t("#ex_b_fs").is(":checked")?t("#bmi__collon").show():t("#bmi__collon").hide()}),t("#show-upload-area").on("click",function(){t(".upload_area").hasClass("hidden")?(t(".upload_area").show(300),t(".upload_area").removeClass("hidden"),t([document.documentElement,document.body]).animate({scrollTop:t(this).offset().top-50+"px"},300)):(t(".upload_area").hide(300),t(".upload_area").addClass("hidden"))}),t(".bmi-copper").on("click",function(e){e.preventDefault();let i=t("#"+this.getAttribute("data-copy"))[0];i.value&&i.value.length>0?t.bmi.clipboard(i.value):t.bmi.clipboard(i.innerText)}),t("#bmi_restore_tbody").on("click",".restore-btn",function(e){lt(function(i){if(i){let i="";if("no"===e.target.closest("tr").getAttribute("data-is-local")?(i="?#googledrive#_"+e.target.closest("tr").getAttribute("gdrive-id"),d=i):(i=e.target.closest("tr").querySelector(".br_name").innerText,d=i),!i||i.trim().length<=0)return t.bmi.alert("warning",t("#bmi-no-file").text(),3e3);t("#restore-ok").prop("checked",!1),t.bmi.modal("freeze-loading-modal").open(),setTimeout(function(){M("is_allowed",function(e){"ask"===e?(t.bmi.modal("freeze-loading-modal").close(),t("#logs-sharing-ask-modal").attr("data-destination","pre-restore-modal"),setTimeout(function(){t.bmi.modal("logs-sharing-ask-modal").open()},300)):(t.bmi.modal("freeze-loading-modal").close(),setTimeout(function(){t.bmi.modal("pre-restore-modal").open()},300))})},300)}})}),t("#bmi_restore_tbody").on("click",".stg-restore-btn",function(e){t.bmi.modal("freeze-loading-modal").open();let i=e.target.closest("tr").querySelector(".br_name").innerText;if(!i||i.trim().length<=0)return t.bmi.alert("warning",t("#bmi-no-file").text(),3e3);t('.bmi-stg-sel-box[data-mode="tastewp"]').click(),t('.bmi-stg-drop-option[backup-name="'+i.trim()+'"]').click(),t("#stgng").click(),setTimeout(function(){t.bmi.modal("freeze-loading-modal").close()},150)}),t("#quick-download-migration").on("click",function(){let e=t("#bm-d-url").val();t.bmi.isUrlValid(e)?lt(function(i){i&&(e.length>0?(d=-100,t("#restore-ok").prop("checked",!1),t.bmi.modal("freeze-loading-modal").open(),setTimeout(function(){M("is_allowed",function(e){"ask"===e?(t.bmi.modal("freeze-loading-modal").close(),t("#logs-sharing-ask-modal").attr("data-destination","pre-restore-modal"),setTimeout(function(){t.bmi.modal("logs-sharing-ask-modal").open()},300)):(t.bmi.modal("freeze-loading-modal").close(),setTimeout(function(){t.bmi.modal("pre-restore-modal").open()},300))})},300)):t.bmi.alert("warning",t("#bmi-invalid-url").text(),5e3))}):t.bmi.alert("warning",t("#bmi-invalid-url").text(),5e3)}),t("#restore-start-sure").on("click",function(){t("#restore-ok").is(":checked")?-100===d?(d=null,t("#restore-live-log-wrapper").find("pre")[0].innerText="",lt(function(o){J(!0,function(){at(function(){if(o){let o=t("#bm-d-url").val();t("#restore_current_step").text(t("#bmi-downloading-remote").text()),t.bmi.ajax("download-backup",{url:o}).then(function(o){clearInterval(i),clearTimeout(e),"success"===o.status?(d=o.name,y=!0,X(!1),t.bmi.reloadBackups(),setTimeout(function(){clearInterval(i),t("#restore-progress-modal .progress-active-bar")[0].style.width="0%",t("#restore-progress-modal .progress-percentage")[0].style.left="0%",t("#restore-progress-modal .progress-percentage")[0].innerText="0%",t("#restore_current_step").text(t("#bmi-restoring-prepare").text())},600)):"cli_download"==o.status?(d=".cli_download",y=!0,X(!1)):"error"===o.status?ct():(t.bmi._msg(o),ct())}).catch(function(t){ct(t)}),t("#restore-live-log-wrapper").find("pre")[0].innerText="",s=0,f=!0,y=!0,X(),t.bmi.modal("pre-restore-modal").close(),t.bmi.modal("restore-progress-modal").open()}})})})):d.includes("?#googledrive#_")?function(){t("#restore-live-log-wrapper").find("pre")[0].innerText="";let e=d.split("?#googledrive#_")[1];d=null,lt(function(o){J(!0,function(){at(function(){o&&(s=0,X(),f=!0,y=!0,t.bmi.modal("pre-restore-modal").close(),t("#restore-live-log-wrapper").find("pre")[0].innerText="",t.bmi.modal("restore-progress-modal").open(),function e(o=!1,n=0,s=!1,r=!1,a=!1,l=!1,c=1e6,u=!1){t.bmi.ajax("download-cloud-backup",{storage:"googledrive",fileId:o,step:n,size:s,md5:r,filename:a,writepath:l,chunksize:c,secret:u}).then(function(p){"success"==p.status?(void 0!==p.size&&(s=p.size),void 0!==p.md5&&(r=p.md5),void 0!==p.originalFilename&&(a=p.originalFilename),void 0!==p.writepath&&(l=p.writepath),void 0!==p.chunksize&&(c=p.chunksize),void 0!==p.secret&&(u=p.secret),void 0!==p.finished&&"true"!=p.finished?e(o,++n,s,r,a,l,c,u):(y=!0,d=p.filename,X(!1),t.bmi.reloadBackups(function(){setTimeout(function(){clearInterval(i),t("#restore-progress-modal .progress-active-bar")[0].style.width="0%",t("#restore-progress-modal .progress-percentage")[0].style.left="0%",t("#restore-progress-modal .progress-percentage")[0].innerText="0%",t("#restore_current_step").text(t("#bmi-restoring-prepare").text())},600)}))):(t.bmi._msg(p),ct(),console.error(p))}).catch(function(t){ct(t)})}(e))})})})}():ut():t.bmi.alert("warning",t("#bmi-restore-require-checkmark").text(),3e3)}),t(".backup-minimize").on("click",function(){K(function(e){!0===e?t("#bmi-ongoing-backup").show(300):t("#bmi-ongoing-backup").hide()})}),function t(){st(function(){setTimeout(function(){t()},h)})}(),t("#bmi-ongoing-backup").on("click",function(){K(function(e){!0===e?(s=0,V(),setTimeout(function(){t.bmi.modal("freeze-loading-modal").close(),setTimeout(function(){t.bmi.modal("backup-progress-modal").open()},300)},300)):(t.bmi.alert("info",t("#bmi-bc-ended").text(),3e3),t.bmi.reloadBackups()),t("#bmi-ongoing-backup").hide(300)})}),t("#bmi_support_chat").on("click",function(){if(0===t("#support-bmi").length){t("#bmi").append('<script id="support-bmi" src="'+t("#bmi-support-url-translation").val()+'" async><\/script>'),setTimeout(function(){t("#bmi_support_chat").hide()},100);var e=!1;let i=setInterval(function(){1==e&&clearInterval(i),void 0!==window.jivo_api&&(window.jivo_api.open(),e=!0)},30)}}),t("#bmi_restore_tbody").on("change",'input[type="checkbox"]',function(e){let i=pt().length;i>0?t(".del-all-btn-wrp").show(300):t(".del-all-btn-wrp").hide(300),i==t("#bmi_restore_tbody").find('input[type="checkbox"]').length?t("#backups-select-all").prop("checked",!0):t("#backups-select-all").prop("checked",!1)}),t("#fix-uname-issues").on("click",function(e){e.preventDefault(),t.bmi.ajax("fix_uname_issues",{}).then(function(e){t.bmi.alert("success",t("#bmi-default-success").text(),3e3)}).catch(function(e){t.bmi.alert("error",t("#bmi-default-fail").text(),3e3)})}),t("#revert-uname-issues").on("click",function(e){e.preventDefault(),t.bmi.ajax("revert_uname_issues",{}).then(function(e){t.bmi.alert("success",t("#bmi-default-success").text(),3e3)}).catch(function(e){t.bmi.alert("error",t("#bmi-default-fail").text(),3e3)})}),t("#backups-select-all").on("change",function(){!0===this.checked?t("#bmi_restore_tbody").find('input[type="checkbox"]').prop("checked",!0):t("#bmi_restore_tbody").find('input[type="checkbox"]').prop("checked",!1),pt().length>0?t(".del-all-btn-wrp").show(300):t(".del-all-btn-wrp").hide(300)}),t(".lrn-mr-btn, .closer-learn-more").on("click",function(){t(".learn_more_about_cron").hasClass("open")?(t(".learn_more_about_cron").removeClass("open"),t(".learn_more_about_cron").hide(300),t(".lrn-mr-btn").show(),t(".lrn-mr-btn").css({opacity:0}),t(".lrn-mr-btn").animate({opacity:1},300)):(t(".learn_more_about_cron").addClass("open"),t(".learn_more_about_cron").show(300),t(".lrn-mr-btn").css({opacity:1}),t(".lrn-mr-btn").animate({opacity:0},300,function(){t(".lrn-mr-btn").hide()}))}),t("#bmi-error-toggle").on("click",function(){t(".error-body").hasClass("open")?(t(".error-body").hide(300),t(".error-body").removeClass("open"),t("#bmi-error-toggle").text(t("#bmi-error-toggle").data("expand"))):(t(".error-body").show(300),t(".error-body").addClass("open"),t("#bmi-error-toggle").text(t("#bmi-error-toggle").data("collapse")))}),t("#bmi_send_test_mail").on("click",function(e){e.preventDefault(),t.bmi.ajax("send-test-mail",{}).then(function(e){t.bmi.alert("success",t("#bmi-email-success").text(),3e3)}).catch(function(e){t.bmi.alert("error",t("#bmi-email-fail").text(),3e3)})}),t("#bmi-error-dismiss").on("click",function(){t(".error-noticer").hide(300),setTimeout(function(){t(".error-noticer").remove()},330),t.bmi.ajax("dismiss-error-notice",{}).then(function(t){}).catch(function(t){})}),t(".deleteAllSelected").on("click",function(){let e=!1,i=pt(),o=[];m={};let n=[];for(let s=0;s<i.length;++s){let r=i[s].closest("tr"),a="no"==t(r).data("is-local"),l=r.querySelector(".br_name").innerText;o.push(l),a&&n.push(l),m[l]={md5:r.getAttribute("md5"),gid:r.getAttribute("gdrive-id")},r.querySelector(".strg-gdrive").classList.contains("img-green")&&(e=!0)}t("#delete-confirm-modal").find(".text1").hide(),t("#delete-confirm-modal").find(".text4").hide(),t("#delete-confirm-modal").find(".text3").hide(),t("#delete-confirm-modal").find(".text2").show();let s=o.length;s<=0||(t(".backup-multiple-del-count").text(s),s>1?(t(".del-only-one").hide(),t(".del-more-than-one").show()):(t(".del-more-than-one").hide(),t(".del-only-one").show()),p=o,e?t(".bmi-cloud-removal").show():t(".bmi-cloud-removal").hide(),t("#remove-cloud-backup-as-well")[0].checked=!1,e&&n.length===i.length&&(t("#remove-cloud-backup-as-well")[0].checked=!0,t(".bmi-cloud-removal").hide(),t("#delete-confirm-modal").find(".text1").hide(),t("#delete-confirm-modal").find(".text2").hide(),t("#delete-confirm-modal").find(".text4").hide(),t("#delete-confirm-modal").find(".text3").show()),t.bmi.modal("delete-confirm-modal").open())}),t("#load-more-backups").on("click",function(e){e.preventDefault(),t.bmi.showMoreBackups()}),t("#show-format-tip").on("click",mt),t("#hide-format-tip").on("click",mt),t(".go-to-marbs").on("click",function(e){e.preventDefault(),document.getElementById("marbs").click(),t.bmi.modal().closeAll()}),t(".go-to-stgng").on("click",function(e){e.preventDefault(),document.getElementById("stgng").click(),t.bmi.modal().closeAll()}),t(".site-reloader").on("click",function(){let t=k.u;"/"!==t.slice(-t.length)&&(t+="/");let e=t+"?backup-migration=AFTER_RESTORE&backup-id="+k.l+"&progress-id=4u70L051n&t="+ +new Date;window.location=e}),t(".get-file-database-sizes").on("click",function(t){t.preventDefault();A(["plugins","uploads","themes","contents_others","wordpress","database"],!0),H(!1,"save-file-config")}),t("#bmi-pro-storage-gdrive-toggle").on("change",function(e){t("#bmi-pro-storage-gdrive-toggle").is(":checked")?t("td.br_stroage.center").removeClass("bmi-gdrive-disabled"):t("td.br_stroage.center").addClass("bmi-gdrive-disabled")}),function(){D(),t.bmi.ajax("get-dynamic-names",{}).then(function(e){let i=e.data;if(t("#bmi_exclusion_rules").text(""),void 0!==i&&void 0!==i.length){for(let e=0;e<i.length;++e){let o=t(".exclusion_template").clone();o.removeClass("exclusion_template"),o.find(".exclusion_txt").val(i[e].txt);let n=o.find(".exclusion_position").find("select"),s=o.find(".exclusion_where").find("select");n&&(n[0].setAttribute("data-def",i[e].pos),s&&(s[0].setAttribute("data-def",i[e].whr),t("#bmi_exclusion_rules").append(o),o.find(".exclusion_position").find(".bmi-dropdown").length>0&&t.bmi.setOption(o.find(".exclusion_position").find(".bmi-dropdown"),null,i[e].pos),o.find(".exclusion_where").find(".bmi-dropdown").length>0&&t.bmi.setOption(o.find(".exclusion_where").find(".bmi-dropdown"),null,i[e].whr)))}t("#dynamic-fpaths-names").text(e["dynamic-fpaths-names"].join("\n")),t("#dynamic-dpaths-names").text(e["dynamic-dpaths-names"].join("\n"))}}).catch(function(t){}),t.bmi.reloadBackups(),t.bmi.reloadStaging(),function(){let e=1e3*parseInt(t("#server-time-auto").attr("data-time")),i=new Date(e);t("#server-time-auto").text(i.toUTCString()),setInterval(function(){e+=1e3,i=new Date(e),t("#server-time-auto").text(i.toUTCString())},1e3),t("#ex_b_fs").is(":checked")?t("#bmi__collon").show():t("#bmi__collon").hide()}(),setInterval(function(){$trs=t(".bmi-tastewp-staging-row"),$trs.each(function(e){let i=t($trs[e]),o=i.attr("expiration");o&&!isNaN(parseInt(o))&&(o=parseInt(o),i.find(".stg-tr-expiration span").text(t.bmi.getExpirationTime(o)))})},1e3);let e=t("#BMI_BLOG_URL").text().trim();"/"!==e.slice(-e.length)&&(e+="/");let i=e+"?backup-migration=PROGRESS_LOGS&progress-id=latest.log&backup-id=current&t="+ +new Date,o=e+"?backup-migration=PROGRESS_LOGS&progress-id=latest_migration.log&backup-id=current&t="+ +new Date,n=e+"?backup-migration=PROGRESS_LOGS&progress-id=latest_staging.log&backup-id=current&t="+ +new Date;t(".download-backup-log-url").attr("href",i),t(".download-restore-log-url").attr("href",o),t(".download-staging-log-url").attr("href",n)}()}),jQuery(document).ready(function(t){t(".bmi-modal-opener").on("click",function(e){this.getAttribute("data-modal")&&""!=this.getAttribute("data-modal")&&(e.preventDefault(),this.getAttribute("data-close")&&t.bmi.modal(this.getAttribute("data-close")).close(),t.bmi.modal(this.getAttribute("data-modal")).open())}),t(".bmi-modal-closer").on("click",function(e){this.getAttribute("data-close")&&""!=this.getAttribute("data-close")?(e.preventDefault(),t.bmi.modal(this.getAttribute("data-close")).close()):this.closest(".bmi-modal")&&(e.preventDefault(),t("#"+this.closest(".bmi-modal").getAttribute("id")).length>0&&t.bmi.modal(this.closest(".bmi-modal").getAttribute("id")).close())}),t(".bmi-modal-close").on("click",function(e){this.closest(".bmi-modal")&&(e.preventDefault(),t.bmi.modal(this.closest(".bmi-modal").id).close())}),t(".bmi-modal").on("click",function(e){e.target!=this||t(e.target).hasClass("bmi-modal-no-close")||t.bmi.modal(this.id).close()})}),jQuery(document).ready(function(t){t.bmi.tooltips.init();let e,i=-1,o=!1,n="";for(let t=0;t<12;++t)n+="<div></div>";function s(o){clearInterval(e),0==o?(t(".upload-progress-bar").find("span")[0].style.width=o+"%",t(".upload-percentage").text(o+"%")):100==o?(t(".upload-progress-bar").find("span")[0].style.width=o+"%",t(".upload-percentage").text(o+"%")):function(o=0,n=1e3){if(i==o)return;i=o,clearInterval(e);let s=parseInt(t(".upload-percentage").text())-1;if(s>o&&0!=o)return;let r=o-s,a=s,l=Math.abs(Math.floor(n/r));e=setInterval(function(){a+=1,t(".upload-progress-bar").find("span")[0].style.width=a+"%",t(".upload-percentage").text(a+"%"),a>=100&&(clearInterval(e),i=null)},l)}(o,1e3)}t(".spinner-loader").html(n).addClass("lds-spinner"),t.fchunker({upId:"upid",upShardSize:bmiVariables.maxUploadSize,upMaxSize:"2000",upUrl:ajaxurl,upType:"zip",bmiNonce:bmiVariables.nonce,upCallBack:function(e){var i=e.status,n=e.message;e.url,Math.random();2==i&&(setTimeout(function(){t("#drop-area").show(300),t(".upload-progress").hide(300)},100),t.bmi.alert("success",t("#bmi-upload-end").text(),3e3),t.bmi.modal("upload-success-modal").open(),t.bmi.reloadBackups()),1==i&&(o||(t.bmi.alert("success",t("#bmi-upload-start").text(),3e3),o=!0)),0==i&&(t.upErrorMsg(n),t("#drop-area").show(300),t(".upload-progress").hide(300)),5==i&&(t.bmi.modal("upload-invalid-manifest-modal").open(),t("#drop-area").show(300),t(".upload-progress").hide(300)),3==i&&(s(100),t.upErrorMsg(n),t("#drop-area").show(300),t(".upload-progress").hide(300))},upEvent:function(t){s(t)},upStop:function(e){s(0),setTimeout(function(){t("#drop-area").show(300),t(".upload-progress").hide(300)},100),e.includes("Type error")?(t.bmi.modal("upload-wrong-file-modal").open(),t.bmi.alert("warning",t("#bmi-upload-wrong").text(),3e3)):e.includes("File already exists")?(t.bmi.modal("upload-exist-file-modal").open(),t.bmi.alert("warning",t("#bmi-upload-exists").text(),3e3)):(t.bmi.alert("error",t("#bmi-upload-error").text(),3e3),console.error(e))},upStart:function(){o=!1,i=-1,s(0),setTimeout(function(){t("#drop-area").hide(300),t(".upload-progress").show(300)},100)}})}),jQuery(document).ready(function(t){function e(t){for(let e=0;e<t.length;++e){let i=t[e].closest(".container-radio");i&&void 0!=typeof i.classList&&(i.classList.remove("active"),!0===t[e].checked&&i.classList.add("active"))}}t('input[type="radio"]').on("change",function(){let t=this.getAttribute("name");this.closest(".container-radio");e(document.querySelectorAll('[name="'+t+'"]'))}),e(document.getElementById("bmi").querySelectorAll('input[type="radio"]'))}),jQuery(document).ready(function(t){let e=null,i=null,o=null,n=!1,s=[],r=0,a=0,l="",c=null,d=null,u=!1;async function p(){clearTimeout(o),async function(){new Promise(async function(e){let i=t("#BMI_BLOG_URL").text().trim();"/"!==i.slice(-i.length)&&(i+="/");let o=await(r=i+"?backup-migration=PROGRESS_LOGS&progress-id=latest_staging_full.log&backup-id=current&t="+ +new Date,new Promise(function(t){let e=window.location.protocol.includes("https"),i=r.includes("https");r=i?r.slice(5):r.slice(4),r=e?"https"+r:"http"+r;try{window.XMLHttpRequest?xmlhttp=new XMLHttpRequest:xmlhttp=new ActiveXObject("Microsoft.XMLHTTP"),xmlhttp.onloadend=function(){return 4==xmlhttp.readyState&&200==xmlhttp.status?t(xmlhttp.responseText):t(!1)},xmlhttp.open("GET",r),xmlhttp.send()}catch(e){return t(!1)}}));var r;if(!o)return e();let u=o.split("\n").slice(0,1)[0];if(o=o.split("\n").slice(1).join("\n"),!1===u||isNaN(parseFloat(u)))return e();let p=t("#staging-live-log-wrapper").find("pre")[0];return o.includes("<")||o.includes(">")||o&&0!=o&&void 0!==o&&function(e,i){if(!1===e)return;let o=e.split("\n");o.length>=1&&(o=o.slice(0,-1));s=o,0==n&&a<s.length&&function e(i){let o="";let r=s[a];let u=document.createElement("DIV");let p="";if(void 0===r||!r)return;"[INFO]"==r.substr(0,6)?p="blue":"[SUCCESS]"==r.substr(0,9)?p="green":"[WARN]"==r.substr(0,6)?p="orange":"[ERROR]"==r.substr(0,7)?p="red":"[END-CODE]"==r.substr(0,10)?p="hide_so_much":"[VERBOSE]"==r.substr(0,9)?p="hide_verbose":"[STEP]"==r.substr(0,6)?(u.classList.add("bold"),u.classList.add("step")):r&&r.trim().length>0&&"["!=r[0]&&a--;"[STEP]"==r.substr(0,6)&&(o=r.slice(29));p.length>0&&u.classList.add(p);u.style.display="none";u.innerText=r;i.appendChild(u);let m=function(){let t="",e=!1;for(let i=0;i<s.length;++i){let o=s[i];"[STEP]"==o.substr(0,6)?t=o.slice(29):!e&&o&&o.trim().includes("[END-CODE]")&&(e=!0,clearTimeout(d),d=o.includes("001")?setTimeout(h,2500):setTimeout(_,2500))}return e}();t(u).show(40,function(){""!=o&&o!=l&&(l=o,t("#staging_current_step").text(o))});i.scrollTop=i.scrollHeight;a++;a<s.length&&0==m?(n=!0,c=setTimeout(function(){e(i)},40)):n=!1}(i)}(o,p),f(u),e()})}(),m(!0)}async function m(e=!1){0==e?(t("#staging-live-log-wrapper .log-wrapper").find("pre")[0].innerText="",t("#staging-progress-modal .progress-active-bar")[0].style.width="0%",t("#staging-progress-modal .progress-percentage")[0].style.left="0%",t("#staging-progress-modal .progress-percentage")[0].innerText="0%",f(0),p()):o=setTimeout(p,1500)}function g(){clearInterval(i),clearTimeout(c),clearTimeout(d),clearTimeout(o),l="",s=[],r=0,a=0,n=!1}function f(o=0,n=1500){if(e==o)return;e=o,clearInterval(i);let s=parseFloat(t("#staging-progress-modal .progress-percentage")[0].style.left)-1,r=o-s,a=s,l=Math.abs(Math.floor(n/r));i=setInterval(function(){a+=1,t("#staging-progress-modal .progress-active-bar")[0].style.width=a.toFixed(2)+"%",t("#staging-progress-modal .progress-percentage")[0].style.left=a.toFixed(2)+"%",t("#staging-progress-modal .progress-percentage")[0].innerText=a.toFixed(0)+"%",a>=100&&(e=null,clearInterval(i)),a>o&&clearInterval(i)},l)}function h(){g(),t.bmi.modal("freeze-loading-modal").close(),t.bmi.modal("staging-progress-modal").close(),t.bmi.modal("staging-error-modal").close(),t.bmi.modal("staging-success-modal").open()}function _(e=!1){if(t("#after-logs-sent-modal").attr("data-error-source","staging"),g(),t.bmi.modal("freeze-loading-modal").close(),t.bmi.modal("staging-progress-modal").close(),t.bmi.modal("staging-success-modal").close(),t.bmi.modal("staging-error-modal").open(),!e){let e=t("#stg-notices-button").attr("c-errorProcess");t.bmi.alert("error",e,5e3)}}function b(e){g(),t.bmi.modal("freeze-loading-modal").close(),t.bmi.modal("staging-progress-modal").close(),t.bmi.modal("staging-success-modal").close(),t.bmi.modal("staging-error-modal").close(),t.bmi.alert("info",t("#bmi-stg-aborted-al").text(),3e3),t.bmi.reloadStaging()}t("#bmi").on("click",".bmi-stg-sel-box",function(e){t(this)[0].classList.contains("bmi-active")||"A"!=e.target.tagName&&(t(".bmi-stg-sel-box.bmi-active").removeClass("bmi-active"),t(this).addClass("bmi-active"),"tastewp"==t(this).data("mode")?(t(".bmi-stg-creation-box-local").hide(300),t(".bmi-stg-creation-box-tastewp").hide(300),t(".bmi-stg-creation-box-tastewp-empty").hide(300),t(".bmi-stg-drop-option:not(.bmi-stg-option-template)").length>0?t(".bmi-stg-creation-box-tastewp").show(300):t(".bmi-stg-creation-box-tastewp-empty").show(300)):(t(".bmi-stg-creation-box-local").show(300),t(".bmi-stg-creation-box-tastewp").hide(300),t(".bmi-stg-creation-box-tastewp-empty").hide(300)))}),t(".bmi-stg-dropdown-area-selector").on("click",function(){t(".bmi-stg-dropdown-area").toggleClass("bmi-active")}),t("body").on("click",":not(.bmi-stg-dropdown-area)",function(e){e.target.closest(".bmi-stg-dropdown-area")||t(".bmi-stg-dropdown-area").removeClass("bmi-active")}),t(".bmi-stg-dropdown-area-inner-scroll").on("click",".bmi-stg-drop-option",function(e){let i=t(this).attr("backup-name"),o=t(this).find(".bmi-stg-option-date i").text(),n=t(this).find(".bmi-stg-option-size i").text();t(".bmi-stg-drop-option.active").removeClass("active"),t(this).addClass("active"),t(".bmi-stg-dropdown-area-selector").find(".bmi-stg-option-name").text(i),t(".bmi-stg-dropdown-area-selector").find(".bmi-stg-option-date i").text(o),t(".bmi-stg-dropdown-area-selector").find(".bmi-stg-option-size i").text(n),t("#bmi-stg-current-backup-selected").val(i),t(".bmi-stg-dropdown-area").removeClass("bmi-active")}),t(".i-staging-creator-tastewp").on("click",function(){let e=t(".bmi-stg-dropdown-area-selector .bmi-stg-option-name").text();t("#stg-prenotice-mode-local").hide(),t("#stg-prenotice-mode-tastewp").show(),t("#start-entire-staging").attr("mode","tastewp"),t("#bmi-staging-local-current-backup").text(e),t.bmi.modal("staging-prenotice-modal").open()}),t(".i-staging-creator-local").on("click",function(){let e=t("#bmi-stg-subname-input").val().trim(),i=t(this).attr("c-empty"),o=t(this).attr("c-long"),n=t(this).attr("c-error"),s=t(this).attr("c-invalid");return e.length<=0?t.bmi.alert("warning",i,5e3):/^[a-zA-Z0-9-_]+$/.test(e)?e.length>=24?t.bmi.alert("warning",o,5e3):(t.bmi.modal("freeze-loading-modal").open(),void t.bmi.ajax("staging-local-name",{name:e}).then(function(e){if(t.bmi.modal("freeze-loading-modal").close(),"success"!=e.status)return"fail"==e.status?t.bmi.alert("warning",e.message,5e3):t.bmi.alert("error",n,5e3);{let e=t("#bmi-stg-homeurl").text()+t("#bmi-stg-subname-input").val();t("#stg-prenotice-mode-local").show(),t("#stg-prenotice-mode-tastewp").hide(),t("#bmi-staging-local-current-url").text(e),t("#bmi-staging-latest-url").text(e),t("#bmi-staging-latest-url, #bmi-visit-latest-staging").attr("href",e),t("#start-entire-staging").attr("mode","local"),t.bmi.modal("staging-prenotice-modal").open()}}).catch(function(e){return t.bmi.modal("freeze-loading-modal").close(),t.bmi.alert("error",n,5e3)})):t.bmi.alert("warning",s,5e3)}),t("#start-entire-staging").on("click",function(e){if(e.preventDefault(),t.bmi.modal("staging-prenotice-modal").close(),u=!1,"local"==t(this).attr("mode")){!function e(i,o=!1){return new Promise(function(n){let s="staging-start-local-creation";o?s="staging-local-creation-process":t.bmi.modal("freeze-loading-modal").open(),t.bmi.ajax(s,i).then(function(i){if(o||(t.bmi.modal("freeze-loading-modal").close(),t.bmi.modal("staging-progress-modal").open()),"success"==i.status){t("#bmi-tastewp-staging-success-text").hide(),t("#bmi-local-staging-success-text").show(),t(".bmi-staging-success-img-normal").addClass("bmi-image-hide"),t(".bmi-staging-success-img-tastewp").addClass("bmi-image-hide"),t(".bmi-staging-success-img-normal").removeClass("bmi-image-hide"),t("#bmi-stg-subname-input").val(""),t.bmi.reloadStaging();let e=`${i.url}/wp-login.php?autologin=true&user=${i.userid}&secret=${i.password}`;t("#bmi-visit-latest-staging").attr("href",e),t("#bmi-staging-latest-url").attr("href",e),d=setTimeout(h,500)}else if("continue"==i.status)o||m(),u&&(i.data.delete=!0),e(i.data,!0);else{if("fail"==i.status)return _(!0),t.bmi.alert("warning",i.message,5e3);"deleted"==i.status?b(i.name):_()}}).catch(function(t){_(),console.error(t)})})}({name:t("#bmi-stg-subname-input").val().trim()})}else if("tastewp"==t(this).attr("mode")){let e=+new Date+"";!function e(i,o=!1){return new Promise(function(n){o&&(t.bmi.modal("freeze-loading-modal").open(),i.initialize=!0),t.bmi.ajax("staging-tastewp-creation-process",i).then(function(i){if("success"==i.status){t.bmi.reloadStaging();let e=`${i.url}`;t("#bmi-visit-latest-staging").attr("href",e),t("#bmi-staging-latest-url").attr("href",e),t("#bmi-staging-latest-url").text(e),t("#bmi-tastewp-staging-success-text").show(),t("#bmi-local-staging-success-text").hide(),t(".bmi-staging-success-img-normal").addClass("bmi-image-hide"),t(".bmi-staging-success-img-tastewp").addClass("bmi-image-hide"),t(".bmi-staging-success-img-tastewp").removeClass("bmi-image-hide"),d=setTimeout(h,500)}else if("continue"==i.status)o&&(m(),t.bmi.modal("freeze-loading-modal").close(),t.bmi.modal("staging-progress-modal").open()),u&&(i.data.delete=!0),e(i.data);else{if("fail"==i.status)return _(!0),t.bmi.alert("warning",i.message,5e3);"deleted"==i.status?b(i.name):_()}}).catch(function(t){_(),console.error(t)})})}({name:Math.random().toString(36).substr(2,16)+e.slice(-4),backupName:t("#bmi-stg-current-backup-selected").val()},!0)}else t.bmi.modal("freeze-loading-modal").close()}),t("#rescan-for-staging").on("click",function(e){e.preventDefault(),t.bmi.reloadStaging()}),t("#stg-tbody-table").on("click",".bc-stg-edit-btn",function(e){e.preventDefault();let i=t(this).closest("tr").attr("name"),o=t(this).closest("tr").find(".stg-tr-name").text();t("#bmi-stg-rename-input").val(o),t("#stg-display-name-edit-confirm").attr("data-name",i),t.bmi.modal("staging-rename-modal").open()}),t("#stg-display-name-edit-confirm").on("click",function(e){e.preventDefault();let i=t(".i-staging-creator-local").attr("c-empty"),o=t(".i-staging-creator-local").attr("c-long"),n=t(".i-staging-creator-local").attr("c-invalid"),s=t(".i-staging-creator-local").attr("c-error"),r=t("#bmi-stg-rename-input").val(),a=t(this).attr("data-name");return r.length<=0?t.bmi.alert("warning",i,5e3):/^[a-zA-Z0-9-_]+$/.test(r)?r.length>=24?t.bmi.alert("warning",o,5e3):(t.bmi.modal("freeze-loading-modal").open(),void t.bmi.ajax("staging-rename-display",{name:a,new:r}).then(function(e){if(t.bmi.modal("freeze-loading-modal").close(),"success"!=e.status)return"fail"==e.status?t.bmi.alert("warning",e.message,5e3):t.bmi.alert("error",s,5e3);t.bmi.modal("staging-rename-modal").close(),t.bmi.reloadStaging()}).catch(function(e){return t.bmi.modal("freeze-loading-modal").close(),t.bmi.alert("error",s,5e3)})):t.bmi.alert("warning",n,5e3)}),t("#bmi-visit-latest-staging").on("click",function(e){t("#bmi-staging-latest-url").text().includes("tastewp")&&setTimeout(function(){t.bmi.reloadStaging()},8e3)}),t("#bmi-staging-stop").on("click",function(){t.bmi.modal("freeze-loading-modal").open(),u=!0}),t("#stg-tbody-table").on("click",".stg-login-btn",function(e){if("tastewp"==t(this).closest("tr").attr("server")){let e=t(this).closest("tr").find(".stg-tr-url-el").text();return e.includes("/stg/")?t(this).attr("href",e):(setTimeout(function(){t.bmi.reloadStaging()},8e3),t(this).attr("href","https://tastewp.com/stg/access/"+t(this).closest("tr").attr("token"))),!0}e.preventDefault();let i=t(this).closest("tr").attr("name"),o=t(".i-staging-creator-local").attr("c-error"),n=this;t.bmi.modal("freeze-loading-modal").open(),t.bmi.ajax("staging-prepare-login",{name:i}).then(function(e){if(t.bmi.modal("freeze-loading-modal").close(),"success"!=e.status)return"fail"==e.status?t.bmi.alert("warning",e.message,5e3):t.bmi.alert("error",o,5e3);t(n).attr("href",e.url),window.open(e.url,"_blank")}).catch(function(e){return t.bmi.modal("freeze-loading-modal").close(),t.bmi.alert("error",o,5e3)})}),t("#stg-tbody-table").on("click",".bc-stg-remove-btn",function(e){e.preventDefault();let i=t(this).closest("tr").attr("name"),o=t(this).closest("tr").find(".stg-tr-url-el").text();t("#bmi-staging-removal-url").attr("href",o),t("#bmi-staging-removal-url").text(o),t("#stg-removal-confirm").attr("data-name",i),t.bmi.modal("staging-delete-confirm-modal").open()}),t("#stg-removal-confirm").on("click",function(e){e.preventDefault();let i=t(this).attr("data-name"),o=t(".i-staging-creator-local").attr("c-error");t.bmi.modal("freeze-loading-modal").open(),t.bmi.ajax("staging-delete-permanently",{name:i}).then(function(e){if(t.bmi.modal("freeze-loading-modal").close(),"success"!=e.status)return"fail"==e.status?t.bmi.alert("warning",e.message,5e3):t.bmi.alert("error",o,5e3);t.bmi.modal("staging-delete-confirm-modal").close(),t.bmi.reloadStaging()}).catch(function(e){return t.bmi.modal("freeze-loading-modal").close(),t.bmi.alert("error",o,5e3)})});let v=document.querySelector(".bmi-stg-dropdown-area-inner-scroll");v&&v.addEventListener("wheel",function(t){let e=v.scrollHeight-v.offsetHeight-v.scrollTop;t.deltaY<0?0==v.scrollTop&&(t.preventDefault(),t.stopPropagation()):e<=0&&(t.preventDefault(),t.stopPropagation())})}),jQuery(document).ready(function(t){let e=!1;t(".tabs").on("click",".tab",function(i){if(this.classList.contains("active"))return;if(!0===e)return;e=!0,t.bmi.collapsers.closeAll();let o=this.getAttribute("data-point");"manage-restore-wrapper"==o?(t("#create-backup-wrapper").hide(300),t("#staging-sites-wrapper").hide(300),t('[data-point="create-backup-wrapper"]').removeClass("active"),t('[data-point="staging-sites-wrapper"]').removeClass("active")):"staging-sites-wrapper"==o?(t("#create-backup-wrapper").hide(300),t("#manage-restore-wrapper").hide(300),t('[data-point="create-backup-wrapper"]').removeClass("active"),t('[data-point="manage-restore-wrapper"]').removeClass("active")):"create-backup-wrapper"==o&&(t("#manage-restore-wrapper").hide(300),t("#staging-sites-wrapper").hide(300),t('[data-point="manage-restore-wrapper"]').removeClass("active"),t('[data-point="staging-sites-wrapper"]').removeClass("active")),t("#"+o).show(300),t(this).addClass("active"),setTimeout(function(){e=!1},320)})}),jQuery(document).ready(function(t){let e=document.getElementById("drop-area");function i(t){t.preventDefault(),t.stopPropagation()}function o(t){e.classList.add("highlight")}function n(t){e.classList.remove("highlight")}e&&(["dragenter","dragover","dragleave","drop"].forEach(t=>{e.addEventListener(t,i,!1)}),["dragenter","dragover"].forEach(t=>{e.addEventListener(t,o,!1),document.querySelector("body").addEventListener(t,o,!1)}),["dragleave","drop","mouseleave"].forEach(t=>{e.addEventListener(t,n,!1)}),t("body, #drop-area").on("mouseleave dragleave drop",function(){n()}),e.addEventListener("drop",function(t){!function(t){t=[...t],jQuery.fchunker_upload("file",t[0])}(t.dataTransfer.files)},!1))});